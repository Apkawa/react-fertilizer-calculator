(this["webpackJsonpfertilizer-calculator"]=this["webpackJsonpfertilizer-calculator"]||[]).push([[6],{253:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(5),c=n(94),r=n(0),l=n.n(r),o=n(19),i=n(101),u=Object(r.forwardRef)((function(e,t){var n,u=e.component,m=e.size,d=void 0===m?"1.5em":m,f=e.children,s=Object(c.a)(e,["component","size","children"]),b=Object(r.useState)(d||0),p=Object(a.a)(b,2),E=p[0],v=p[1],j=Object(i.a)();Object(r.useEffect)((function(){var e;!d&&t&&"current"in t&&v((null===(e=t.current)||void 0===e?void 0:e.offsetWidth)||0)}),[t,v,d]);var O=0;return f&&(O=2),l.a.createElement(o.b,Object.assign({type:"button"},s,{ref:t}),l.a.createElement(u,{color:null===(n=j.colors)||void 0===n?void 0:n.background,size:E,style:{marginRight:O}}),f)}))},254:function(e,t,n){"use strict";function a(e){return e&&parseInt(e)}function c(e){return e&&parseFloat(e)}n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return c}))},256:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(94),c=n(0),r=n.n(c),l=n(153),o=n(68),i=n(252),u=n(70);function m(){var e=Object(o.a)(["\n  ::-webkit-inner-spin-button, ::-webkit-outer-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n    width: 0;\n    height: 0;\n  }\n  -moz-appearance: textfield;\n"]);return m=function(){return e},e}var d=Object(u.b)(i.b)(m()),f=function(e){var t=e.input,n=e.label,c=e.type,l=void 0===c?"text":c,o=Object(a.a)(e,["input","label","type"]);return r.a.createElement(d,Object.assign({},o,t,{type:l,lang:"en-US",placeholder:o.placeholder||n}))},s=function(e){var t=e.name,n=Object(a.a)(e,["name"]);return r.a.createElement(l.a,Object.assign({component:f,name:t},n))}},257:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u}));var a=n(0),c=n(93),r=n(129),l=n(115),o=n(42);function i(){return Object(a.useContext)(r.a).form}function u(e){var t=Object(c.c)();return[Object(c.d)((function(t){return Object(l.a)(e)(t)})),function(n,a){t(Object(o.a)(e,n,a))}]}},263:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(94),c=n(0),r=n.n(c),l=n(252),o=n(153),i=function(e){var t=e.input,n=e.label,c=Object(a.a)(e,["input","label"]);return r.a.createElement(l.c,null,r.a.createElement(l.a,Object.assign({},c,t,{checked:t.value})),n)},u=function(e){var t=e.name,n=Object(a.a)(e,["name"]);return r.a.createElement(o.a,Object.assign({component:i,name:t},n))}},265:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var a=n(5),c=n(0),r=n.n(c),l=n(68),o=n(54),i=n.n(o),u=n(19),m=n(50),d=n(102);function f(){var e=Object(l.a)(["\n  overflow-y: auto;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: ",";\n  left: 0;\n  justify-content: center;\n  align-items: center;\n  background-color: rgba(255, 255, 255, 0.5);\n  z-index: 999;\n  \n  // Mobile\n  @media screen and (max-height: 500px), screen and (max-width: 500px) {\n    align-items: initial;\n  }\n"]);return f=function(){return e},e}var s=Object(m.default)(u.d)(f(),(function(){return"".concat(window.pageYOffset,"px")}));function b(e){var t=e.children,n=function(){var e=document.querySelector("#modal-root");return e||((e=document.createElement("div")).setAttribute("id","modal-root"),document.body.appendChild(e)),e}();return i.a.createPortal(r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,null,r.a.createElement("style",{type:"text/css"},"\n          body {\n            overflow: hidden;\n          }\n        ")),r.a.createElement(s,null,r.a.createElement(u.c,{backgroundColor:"#fff",height:"max-content"},t))),n)}var p=n(85),E=n(97);function v(e){var t=e.opened,n=void 0!==t&&t,l=e.button,o=e.container,i=Object(c.useState)(!n),m=Object(a.a)(i,2),d=m[0],f=m[1];Object(c.useEffect)((function(){f(!n)}),[n]),Object(c.useEffect)((function(){d&&e.onClose&&e.onClose()}),[d,e]);var s={open:function(){return f(!1)},close:function(){return f(!0)}},v={modal:s};return r.a.createElement(r.a.Fragment,null,l&&l(v),d?null:r.a.createElement(b,null,r.a.createElement(u.d,{justifyContent:"space-between"},r.a.createElement(u.e,{fontSize:2},e.title),r.a.createElement(p.a,{component:E.a,onClick:s.close})),r.a.createElement(u.a,null,o(v))))}},268:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));var a=n(320),c=n.n(a),r=n(337),l=n.n(r),o=c.a,i=l.a},272:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return d}));var a=n(0),c=n.n(a),r=n(19),l=n(97),o=n(26),i=n(4),u=n(253),m=function(e){var t=e.name,n=e.value,a=e.delta,l=t;return e.isOxide&&i.e.hasOwnProperty(t)&&(l=i.e[t]),c.a.createElement(r.a,{bg:t,flex:1,mx:"2px",px:1,color:"black",minWidth:"2.1em",maxWidth:"4em",fontSize:1},c.a.createElement(r.d,{flexDirection:"column",alignItems:"center"},c.a.createElement(r.a,null,l),c.a.createElement(r.a,null,n),"undefined"!==typeof a?c.a.createElement(r.a,null,a):null))},d=function(e){var t=e.item,n=e.onRemove,a=e.weight,d=Object(o.e)(t,!1);return c.a.createElement(r.c,{width:"auto"},c.a.createElement(r.d,{justifyContent:"space-between",alignItems:"center"},c.a.createElement(r.a,{flex:1},c.a.createElement(r.f,{flex:1},t.id),c.a.createElement(r.d,null,i.b.map((function(e){var t=d.elements[e];return t?c.a.createElement(m,{name:e,key:e,value:t,isOxide:!0}):null})))),c.a.createElement(r.d,null,c.a.createElement(r.d,{alignItems:"center",justifyContent:"center",margin:1},a?c.a.createElement(r.f,{textAlign:"center",minWidth:"3em"},a.weight,"\u0433",a.volume?c.a.createElement(c.a.Fragment,null,c.a.createElement("br",null),c.a.createElement("span",{title:"\u041e\u0431\u044a\u0435\u043c \u0438\u043b\u0438 \u0432\u0435\u0441 \u0440\u0430\u0441\u0442\u0432\u043e\u0440\u0430"},a.volume&&"".concat(a.volume," \u043c\u043b").concat(a.liquid_weight?", ".concat(a.liquid_weight,"\u0433"):""))):null):null),c.a.createElement(u.a,{padding:1,alignSelf:"center",component:l.a,onClick:function(){return n()}}))))}},277:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(){var e=document.createElement("a");return document.body.appendChild(e),e.setAttribute("style","display: none"),function(t,n){var a=new Blob([t],{type:"octet/stream"}),c=window.URL.createObjectURL(a);e.href=c,e.download=n,e.click(),window.URL.revokeObjectURL(c)}}()},278:function(e,t,n){"use strict";n.d(t,"c",(function(){return _})),n.d(t,"b",(function(){return C})),n.d(t,"a",(function(){return z}));var a=n(94),c=n(9),r=n(0),l=n.n(r),o=n(19),i=n(151),u=n(42),m=n(154),d=n(152),f=n(256),s=n(26),b=n(4),p=n(254),E=function(e){var t=e.name,n=e.disabled,a=t;return b.e.hasOwnProperty(t)&&(a=b.e[t]),l.a.createElement(o.d,{flexDirection:"column",justifyContent:"center",alignItems:"center",width:"4rem"},l.a.createElement("label",{style:{textAlign:"center"}},a),l.a.createElement(f.a,{name:"npk."+t,type:"number",min:"0",max:"100",autoComplete:"off",width:"3rem",style:{textAlign:"center"},normalize:p.a,disabled:n}))},v=n(64),j=n(263),O=function(e){var t=e.fields;return l.a.createElement(o.c,{width:"100%"},l.a.createElement(o.d,null,l.a.createElement("button",{type:"button",onClick:function(){return t.push({formula:"",percent:98})}},"+")),l.a.createElement(o.d,{flexDirection:"column"},t.map((function(e,n){return l.a.createElement(o.d,{key:n,width:"100%"},l.a.createElement(f.a,{name:"".concat(e,".formula"),flex:2,placeholder:"NH4NO3"}),l.a.createElement(f.a,{name:"".concat(e,".percent"),type:"number",step:"0.1",min:"0",max:"100",placeholder:"98",normalize:p.a,flex:1}),l.a.createElement("button",{type:"button",onClick:function(){return t.remove(n)}},"-"))}))))},g=n(257),h=n(252),y=n(5),x=n(65),w=function(e){var t=Object(g.b)(Object(g.a)())[0].composition_enable,n=e.npk,a=e.onChange,c=Object(r.useState)(n&&Object(x.j)(n)),i=Object(y.a)(c,2),u=i[0],m=i[1],d=Object(r.useState)(!1),f=Object(y.a)(d,2),s=f[0],b=f[1];Object(r.useEffect)((function(){s||m(e.npk&&Object(x.j)(e.npk))}),[s,e.npk]);return l.a.createElement(o.d,{flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",padding:2},l.a.createElement("label",{style:{textAlign:"center"}}),l.a.createElement(h.b,{disabled:t,placeholder:'\u0411\u044b\u0441\u0442\u0440\u043e\u0435 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 "NO3=10 P2O5=12 K=5"',value:u,type:"string",autoComplete:"off",style:{textAlign:"center"},onChange:function(e){m(e.target.value);var t=Object(x.i)(e.target.value);console.log(t),a&&a(t)},onFocus:function(){return b(!0)},onBlur:function(){b(!1),m(e.npk&&Object(x.j)(e.npk))}}))},k=n(93);function _(e){var t=Object(c.a)({},e);return e.composition&&(t.npk=Object(s.e)(e,!1).elements,t.composition_enable=!0),e.solution_concentration&&(t.solution_concentration=e.solution_concentration,t.solution_density=e.solution_density||1e3,t.solution_density_enable=!0),t}function C(e){var t=e.composition_enable,n=e.composition,c=e.npk,r=e.solution_density_enable,l=e.solution_density,o=e.solution_concentration,i=Object(a.a)(e,["composition_enable","composition","npk","solution_density_enable","solution_density","solution_concentration"]);return t?i.composition=n:i.npk=c,r&&(i.solution_density=l,i.solution_concentration=o),i}var z=Object(d.a)({form:v.a,enableReinitialize:!0})((function(e){var t=Object(g.a)(),n=Object(g.b)(t)[0],a=Object(k.c)();return l.a.createElement(i.a,null,l.a.createElement(o.d,{flexDirection:"column"},l.a.createElement(f.a,{name:"id",title:"Name",label:"Name"}),l.a.createElement(o.a,null,"\u041c\u0430\u043a\u0440\u043e\u044d\u043b\u0435\u043c\u0435\u043d\u0442\u044b"),l.a.createElement(o.d,null,b.c.map((function(e){return l.a.createElement(E,{name:e,disabled:n.composition_enable})}))),l.a.createElement(o.a,null,"\u041c\u0438\u043a\u0440\u043e\u044d\u043b\u0435\u043c\u0435\u043d\u0442\u044b"),l.a.createElement(o.d,null,b.d.map((function(e){return l.a.createElement(E,{name:e,disabled:n.composition_enable})}))),l.a.createElement(o.d,null,l.a.createElement(w,{npk:n.npk,onChange:function(e){a(Object(u.a)(t,"npk",e))}})),l.a.createElement(o.d,null,l.a.createElement(j.a,{name:"composition_enable",label:"\u0424\u043e\u0440\u043c\u0443\u043b\u0430"})),n.composition_enable?l.a.createElement(o.d,null,l.a.createElement(m.a,{name:"composition",component:O})):null,l.a.createElement(o.d,{alignItems:"center"},l.a.createElement(o.a,{width:"auto",marginRight:2},l.a.createElement(j.a,{name:"solution_density_enable",label:"\u0420\u0430\u0441\u0442\u0432\u043e\u0440"})),n.solution_density_enable?l.a.createElement(o.d,{flexDirection:"column"},l.a.createElement(o.d,{alignItems:"flex-end"},l.a.createElement(h.c,{flexDirection:"column"},"\u041a\u043e\u043d\u0446\u0435\u043d\u0442\u0440\u0430\u0446\u0438\u044f",l.a.createElement(f.a,{name:"solution_concentration",type:"number",step:"0.1",min:"0",max:"3000",normalize:p.a,width:"5em",marginRight:2}),l.a.createElement(o.f,{sx:{whiteSpace:"nowrap"}},"\u0433/\u043b"))),l.a.createElement(o.d,{alignItems:"flex-end"},l.a.createElement(h.c,{flexDirection:"column"},"\u041f\u043b\u043e\u0442\u043d\u043e\u0441\u0442\u044c",l.a.createElement(f.a,{name:"solution_density",type:"number",step:"1",min:"800",max:"3000",normalize:p.b,width:"5em",marginRight:2})),l.a.createElement(o.f,{sx:{whiteSpace:"nowrap"}},"\u0433/\u043b"))):null),l.a.createElement(o.d,null,l.a.createElement(h.c,{flexDirection:"column"},"\u041c\u0438\u043a\u0441\u0435\u0440, \u043d\u043e\u043c\u0435\u0440 \u043f\u043e\u043c\u043f\u044b",l.a.createElement(f.a,{name:"pump_number",type:"number",step:"1",min:"1",max:"16",required:!1,normalize:p.b,maxWidth:"3em"})))))}))},333:function(e,t){},334:function(e,t){},493:function(e,t,n){"use strict";n.r(t),n.d(t,"FertilizerManager",(function(){return A}));var a=n(5),c=n(0),r=n.n(c),l=n(93),o=n(19),i=n(487),u=n(26),m=n(4),d=n(253),f=n(490),s=n(491),b=n(272),p=n(278),E=n(265),v=n(257),j=n(64),O=n(44);function g(e){var t=e.fertilizer,n=Object(u.e)(t,!1),c=Object(v.b)(j.a),i=Object(a.a)(c,1)[0],g=Object(l.c)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(o.c,{width:"auto",marginBottom:2},r.a.createElement(o.d,{justifyContent:"space-between",alignItems:"center"},r.a.createElement(o.a,{flex:1},r.a.createElement(o.f,{flex:1},t.id," \xa0",t.solution_concentration&&"[\u0436\u0438\u0434\u043a\u0438\u0439 ".concat(t.solution_concentration," \u0433/\u043b]")," \xa0",r.a.createElement("span",{title:"\u041d\u043e\u043c\u0435\u0440 \u043f\u043e\u043c\u043f\u044b \u0432 \u043c\u0438\u043a\u0441\u0435\u0440\u0435"},t.pump_number&&"p".concat(t.pump_number))," \xa0"),r.a.createElement(o.d,null,m.b.map((function(e){var t=n.elements[e];return t?r.a.createElement(b.a,{name:e,key:e,value:t,isOxide:!0}):null})))),r.a.createElement(o.d,null,r.a.createElement(E.a,{button:function(e){var t=e.modal;return r.a.createElement(d.a,{padding:1,alignSelf:"center",component:f.a,backgroundColor:"primary",onClick:t.open})},container:function(e){var n=e.modal;return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{initialValues:Object(p.c)(t)}),r.a.createElement(o.d,{justifyContent:"flex-end"},r.a.createElement(o.b,{type:"button",onClick:function(){return function(e){g(Object(O.d)(Object(p.b)(i))),e.close()}(n)}},"Save")))}}),r.a.createElement(d.a,{padding:1,alignSelf:"center",component:s.a,backgroundColor:"danger",onClick:function(){g(Object(O.e)(t))}})))))}var h=n(307),y=n(9),x=n(94),w=n(8),k=n(17),_=n(299),C=n(268),z=["id"].concat(Object(k.a)(m.b));function S(e){var t=Object(c.createRef)(),n=Object(l.c)(),o=Object(c.useState)({width:0,height:0}),i=Object(a.a)(o,2),m=i[0],f=i[1];Object(c.useEffect)((function(){var e,n,a={width:(null===(e=t.current)||void 0===e?void 0:e.offsetWidth)||0,height:(null===(n=t.current)||void 0===n?void 0:n.offsetHeight)||0};m.width!==a.width&&f(a)}),[t,m.width]);var s=function(e){var t,a;console.log(e.target.value,null===(t=e.target.files)||void 0===t?void 0:t[0]);var c=null===(a=e.target.files)||void 0===a?void 0:a[0];if(!c)return c;var r=new FileReader;r.onload=function(){console.log(r.result),function(e){var t=Object(C.b)(e,{columns:z});isNaN(parseInt(t[0].P))&&t.splice(0,1);var a,c=Object(w.a)(t);try{for(c.s();!(a=c.n()).done;){var r=a.value,l=r.id,o=Object(x.a)(r,["id"]),i=Object(u.b)(l,o);n(Object(O.d)(i))}}catch(m){c.e(m)}finally{c.f()}}(r.result)},r.readAsText(c)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{sx:{position:"relative"},ref:t,component:_.a},r.a.createElement("input",{type:"file",accept:"text/csv, .csv",onChange:function(e){return s(e)},style:Object(y.a)({top:0,left:0,position:"absolute",opacity:0},m)})))}var R=n(298),F=n(277);function I(e){var t=Object(l.d)((function(e){return e.calculator})).fertilizers;return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{onClick:function(){var e=t.map((function(e){return Object(u.e)(e,!1)})).map((function(e){var t=m.b.map((function(t){return e.elements[t]}));return[e.id].concat(Object(k.a)(t))})),n=Object(C.a)(e,{columns:["\u0423\u0434\u043e\u0431\u0440\u0435\u043d\u0438\u0435"].concat(Object(k.a)(m.b)),header:!0});Object(F.a)(n,"\u0423\u0434\u043e\u0431\u0440\u0435\u043d\u0438\u044f.csv")},component:R.a}))}var D=n(339);function A(e){var t=Object(l.d)((function(e){return e.calculator})).fertilizers,n=Object(v.b)(j.a),c=Object(a.a)(n,1)[0],u=Object(l.c)();return r.a.createElement(o.d,{flexDirection:"column"},r.a.createElement(o.d,null,r.a.createElement(E.a,{button:function(e){var t=e.modal;return r.a.createElement(d.a,{padding:1,alignSelf:"center",component:h.a,backgroundColor:"primary",onClick:t.open})},container:function(e){var t=e.modal;return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{initialValues:Object(p.c)({id:""})}),r.a.createElement(o.d,{justifyContent:"flex-end"},r.a.createElement(o.b,{type:"button",onClick:function(){return function(e){u(Object(O.d)(Object(p.b)(c))),e.close()}(t)}},"Save")))}})),r.a.createElement(i.ReactSortable,{list:t,setList:function(e){return u(Object(O.g)(e))}},t.map((function(e){return r.a.createElement(g,{fertilizer:e,key:e.id})}))),r.a.createElement(o.c,null,r.a.createElement(o.e,{fontSize:2},"\u0418\u043c\u043f\u043e\u0440\u0442/\u042d\u043a\u0441\u043f\u043e\u0440\u0442"),r.a.createElement(o.d,{flexDirection:"column",p:3},r.a.createElement(o.d,{alignItems:"center",paddingBottom:2,justifyContent:"space-between",flexWrap:"wrap"},r.a.createElement(o.a,{sx:{"&>*":{marginLeft:1}}},r.a.createElement(S,null),r.a.createElement(I,null),r.a.createElement(d.a,{component:D.a,onClick:function(){return u(Object(O.f)())}}))))))}t.default=A}}]);
//# sourceMappingURL=6.02472fc0.chunk.js.map