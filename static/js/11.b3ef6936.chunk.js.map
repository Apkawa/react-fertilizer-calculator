{"version":3,"sources":["../node_modules/@rebass/forms/dist/index.esm.js","pages/ChemFormula/index.tsx"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","arr","rebassProps","concat","Array","isArray","arr2","_arrayWithoutHoles","systemProps","iter","Symbol","iterator","toString","from","_iterableToArray","TypeError","_nonIterableSpread","PRE","RegExp","join","MRE","getProps","test","props","next","getSystemProps","k","getMarginProps","omitMarginProps","SVG","_ref","size","React","createElement","Box","as","xmlns","width","height","viewBox","fill","Label","forwardRef","ref","Flex","tx","variant","__css","Input","type","display","p","appearance","fontSize","lineHeight","border","borderRadius","color","bg","DownArrow","d","RadioChecked","sx","ml","alignSelf","pointerEvents","RadioUnchecked","RadioIcon","Fragment","Radio","_ref2","className","_ref2$variant","position","opacity","zIndex","overflow","mr","CheckboxChecked","CheckboxUnchecked","CheckboxIcon","Checkbox","_ref3","_ref3$variant","_ref4","my","cursor","outline","_ref5","checked","role","m","borderColor","boxShadow","style","transform","mt","transitionProperty","transitionTimingFunction","transitionDuration","history","useHistory","useParams","formula","percent","initialPercent","useState","value","setValue","parseFloat","setPercent","result","setResult","onChangeHandler","useEffect","f","id","composition","molecule","parseMolecule","massParts","calculateMassParts","entries","map","a","c","count","mass","ATOMIC_MASS","totalMass","massPart","decomposed_formula","fromEntries","oxide_npk","normalizeFertilizer","elements","npk","parseFormula","replace","justifyContent","placeholder","onChange","event","onBlur","onBlurHandler","step","min","max","flex","minWidth","flexDirection","marginTop","round","colSpan","sum","values","textAlign","FERTILIZER_ELEMENT_NAMES","e"],"mappings":"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","file":"static/js/11.b3ef6936.chunk.js","sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nimport React, { forwardRef } from 'react';\nimport { Box, Flex } from 'reflexbox';\nimport { props as systemProps } from '@styled-system/should-forward-prop';\nvar rebassProps = [].concat(_toConsumableArray(systemProps), ['sx', 'variant']);\nvar PRE = new RegExp(\"^(\".concat(rebassProps.join('|'), \")$\"));\nvar MRE = /^m[trblxy]?$/;\n\nvar getProps = function getProps(test) {\n  return function (props) {\n    var next = {};\n\n    for (var key in props) {\n      if (test(key || '')) next[key] = props[key];\n    }\n\n    return next;\n  };\n};\n\nvar getSystemProps = getProps(function (k) {\n  return PRE.test(k);\n});\nvar getMarginProps = getProps(function (k) {\n  return MRE.test(k);\n});\nvar omitMarginProps = getProps(function (k) {\n  return !MRE.test(k);\n});\n\nvar SVG = function SVG(_ref) {\n  var _ref$size = _ref.size,\n      size = _ref$size === void 0 ? 24 : _ref$size,\n      props = _objectWithoutProperties(_ref, [\"size\"]);\n\n  return React.createElement(Box, _extends({\n    as: \"svg\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"currentcolor\"\n  }, props));\n};\n\nexport var Label = forwardRef(function (props, ref) {\n  return React.createElement(Flex, _extends({\n    ref: ref,\n    as: \"label\",\n    tx: \"forms\",\n    variant: \"label\"\n  }, props, {\n    __css: {\n      width: '100%'\n    }\n  }));\n});\nexport var Input = forwardRef(function (props, ref) {\n  return React.createElement(Box, _extends({\n    ref: ref,\n    as: \"input\",\n    type: \"text\",\n    tx: \"forms\",\n    variant: \"input\"\n  }, props, {\n    __css: {\n      display: 'block',\n      width: '100%',\n      p: 2,\n      appearance: 'none',\n      fontSize: 'inherit',\n      lineHeight: 'inherit',\n      border: '1px solid',\n      borderRadius: 'default',\n      color: 'inherit',\n      bg: 'transparent'\n    }\n  }));\n});\n\nvar DownArrow = function DownArrow(props) {\n  return React.createElement(SVG, props, React.createElement(\"path\", {\n    d: \"M7 10l5 5 5-5z\"\n  }));\n};\n\nexport var Select = forwardRef(function (props, ref) {\n  return React.createElement(Flex, getMarginProps(props), React.createElement(Box, _extends({\n    ref: ref,\n    as: \"select\",\n    tx: \"forms\",\n    variant: \"select\"\n  }, omitMarginProps(props), {\n    __css: {\n      display: 'block',\n      width: '100%',\n      p: 2,\n      appearance: 'none',\n      fontSize: 'inherit',\n      lineHeight: 'inherit',\n      border: '1px solid',\n      borderRadius: 'default',\n      color: 'inherit',\n      bg: 'transparent'\n    }\n  })), React.createElement(DownArrow, {\n    sx: {\n      ml: -28,\n      alignSelf: 'center',\n      pointerEvents: 'none'\n    }\n  }));\n});\nexport var Textarea = forwardRef(function (props, ref) {\n  return React.createElement(Box, _extends({\n    ref: ref,\n    as: \"textarea\",\n    tx: \"forms\",\n    variant: \"textarea\"\n  }, props, {\n    __css: {\n      display: 'block',\n      width: '100%',\n      p: 2,\n      appearance: 'none',\n      fontSize: 'inherit',\n      lineHeight: 'inherit',\n      border: '1px solid',\n      borderRadius: 'default',\n      color: 'inherit',\n      bg: 'transparent'\n    }\n  }));\n});\n\nvar RadioChecked = function RadioChecked(props) {\n  return React.createElement(SVG, props, React.createElement(\"path\", {\n    d: \"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"\n  }));\n};\n\nvar RadioUnchecked = function RadioUnchecked(props) {\n  return React.createElement(SVG, props, React.createElement(\"path\", {\n    d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"\n  }));\n};\n\nvar RadioIcon = function RadioIcon(props) {\n  return React.createElement(React.Fragment, null, React.createElement(RadioChecked, _extends({}, props, {\n    __css: {\n      display: 'none',\n      'input:checked ~ &': {\n        display: 'block'\n      }\n    }\n  })), React.createElement(RadioUnchecked, _extends({}, props, {\n    __css: {\n      display: 'block',\n      'input:checked ~ &': {\n        display: 'none'\n      }\n    }\n  })));\n};\n\nexport var Radio = forwardRef(function (_ref2, ref) {\n  var className = _ref2.className,\n      sx = _ref2.sx,\n      _ref2$variant = _ref2.variant,\n      variant = _ref2$variant === void 0 ? 'radio' : _ref2$variant,\n      props = _objectWithoutProperties(_ref2, [\"className\", \"sx\", \"variant\"]);\n\n  return React.createElement(Box, null, React.createElement(Box, _extends({\n    ref: ref,\n    as: \"input\",\n    type: \"radio\"\n  }, props, {\n    sx: {\n      position: 'absolute',\n      opacity: 0,\n      zIndex: -1,\n      width: 1,\n      height: 1,\n      overflow: 'hidden'\n    }\n  })), React.createElement(Box, _extends({\n    as: RadioIcon,\n    \"aria-hidden\": \"true\",\n    tx: \"forms\",\n    variant: variant,\n    className: className,\n    sx: sx\n  }, getSystemProps(props), {\n    __css: {\n      mr: 2,\n      borderRadius: 9999,\n      color: 'gray',\n      'input:checked ~ &': {\n        color: 'primary'\n      },\n      'input:focus ~ &': {\n        bg: 'highlight'\n      }\n    }\n  })));\n});\n\nvar CheckboxChecked = function CheckboxChecked(props) {\n  return React.createElement(SVG, props, React.createElement(\"path\", {\n    d: \"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"\n  }));\n};\n\nvar CheckboxUnchecked = function CheckboxUnchecked(props) {\n  return React.createElement(SVG, props, React.createElement(\"path\", {\n    d: \"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\"\n  }));\n};\n\nvar CheckboxIcon = function CheckboxIcon(props) {\n  return React.createElement(React.Fragment, null, React.createElement(CheckboxChecked, _extends({}, props, {\n    __css: {\n      display: 'none',\n      'input:checked ~ &': {\n        display: 'block'\n      }\n    }\n  })), React.createElement(CheckboxUnchecked, _extends({}, props, {\n    __css: {\n      display: 'block',\n      'input:checked ~ &': {\n        display: 'none'\n      }\n    }\n  })));\n};\n\nexport var Checkbox = forwardRef(function (_ref3, ref) {\n  var className = _ref3.className,\n      sx = _ref3.sx,\n      _ref3$variant = _ref3.variant,\n      variant = _ref3$variant === void 0 ? 'checkbox' : _ref3$variant,\n      props = _objectWithoutProperties(_ref3, [\"className\", \"sx\", \"variant\"]);\n\n  return React.createElement(Box, null, React.createElement(Box, _extends({\n    ref: ref,\n    as: \"input\",\n    type: \"checkbox\"\n  }, props, {\n    sx: {\n      position: 'absolute',\n      opacity: 0,\n      zIndex: -1,\n      width: 1,\n      height: 1,\n      overflow: 'hidden'\n    }\n  })), React.createElement(Box, _extends({\n    as: CheckboxIcon,\n    \"aria-hidden\": \"true\",\n    tx: \"forms\",\n    variant: variant,\n    className: className,\n    sx: sx\n  }, getSystemProps(props), {\n    __css: {\n      mr: 2,\n      borderRadius: 4,\n      color: 'gray',\n      'input:checked ~ &': {\n        color: 'primary'\n      },\n      'input:focus ~ &': {\n        color: 'primary',\n        bg: 'highlight'\n      }\n    }\n  })));\n});\nexport var Slider = forwardRef(function (_ref4, ref) {\n  var props = _extends({}, _ref4);\n\n  return React.createElement(Box, _extends({\n    ref: ref,\n    as: \"input\",\n    type: \"range\",\n    tx: \"forms\",\n    variant: \"slider\"\n  }, props, {\n    __css: {\n      display: 'block',\n      width: '100%',\n      height: 4,\n      my: 2,\n      cursor: 'pointer',\n      appearance: 'none',\n      borderRadius: 9999,\n      color: 'inherit',\n      bg: 'gray',\n      ':focus': {\n        outline: 'none',\n        color: 'primary'\n      },\n      '&::-webkit-slider-thumb': {\n        appearance: 'none',\n        width: 16,\n        height: 16,\n        bg: 'currentcolor',\n        border: 0,\n        borderRadius: 9999,\n        variant: 'forms.slider.thumb'\n      }\n    }\n  }));\n});\nexport var Switch = forwardRef(function (_ref5, ref) {\n  var checked = _ref5.checked,\n      props = _objectWithoutProperties(_ref5, [\"checked\"]);\n\n  return React.createElement(Box, _extends({\n    ref: ref,\n    as: \"button\",\n    type: \"button\",\n    role: \"switch\",\n    tx: \"forms\",\n    variant: \"switch\",\n    \"aria-checked\": checked\n  }, props, {\n    __css: {\n      appearance: 'none',\n      m: 0,\n      p: 0,\n      width: 40,\n      height: 24,\n      color: 'primary',\n      bg: 'transparent',\n      border: '1px solid',\n      borderColor: 'primary',\n      borderRadius: 9999,\n      '&[aria-checked=true]': {\n        bg: 'primary'\n      },\n      ':focus': {\n        outline: 'none',\n        boxShadow: '0 0 0 2px'\n      }\n    }\n  }), React.createElement(Box, {\n    \"aria-hidden\": true,\n    style: {\n      transform: checked ? 'translateX(16px)' : 'translateX(0)'\n    },\n    sx: {\n      mt: '-1px',\n      ml: '-1px',\n      width: 24,\n      height: 24,\n      borderRadius: 9999,\n      border: '1px solid',\n      borderColor: 'primary',\n      bg: 'background',\n      transitionProperty: 'transform',\n      transitionTimingFunction: 'ease-out',\n      transitionDuration: '0.1s',\n      variant: 'forms.switch.thumb'\n    }\n  }));\n});\n","import React, {useEffect, useState} from \"react\";\nimport {Box, Flex, Heading} from \"rebass\";\nimport {Input} from \"@rebass/forms\";\nimport {calculateMassParts, parseMolecule} from \"@/calculator/chem\";\nimport {Elements} from \"@/calculator/types\";\nimport {normalizeFertilizer} from \"@/calculator/fertilizer\";\nimport {useHistory, useParams} from \"react-router-dom\";\nimport {entries, round, sum, values} from \"@/utils\";\nimport {ATOMIC_MASS, AtomNameType, FERTILIZER_ELEMENT_NAMES} from \"@/calculator/constants\";\n\ntype DecomposedChemFormulaInfo = {\n  [Atom in AtomNameType]?: {\n    count: number,\n    mass: number,\n    totalMass: number,\n    massPart: number,\n  }\n}\n\ninterface Result {\n  formula: string,\n  decomposed_formula: DecomposedChemFormulaInfo,\n  oxide_npk: Elements,\n  npk: Elements,\n}\n\nfunction parseFormula(formula: string, percent = 100): Result {\n  const f = {id: '', composition: [{formula, percent}]}\n  const molecule = parseMolecule(formula)\n  const massParts = calculateMassParts(molecule)\n  const p = entries(molecule).map(([a, c]) =>\n    [a, {count: c, mass: ATOMIC_MASS[a], totalMass: c * ATOMIC_MASS[a], massPart: massParts[a]}]\n  )\n  const decomposed_formula: DecomposedChemFormulaInfo = Object.fromEntries(p)\n  return {\n    formula,\n    decomposed_formula,\n    oxide_npk: normalizeFertilizer(f, false).elements,\n    npk: normalizeFertilizer(f, true).elements,\n  }\n}\n\nexport default () => {\n  const history = useHistory()\n  const {formula = \"\", percent: initialPercent = \"98\"} = useParams<{ formula?: string, percent: string }>();\n  const [value, setValue] = useState<string>(formula)\n  const [percent, setPercent] = useState<number>(parseFloat(initialPercent))\n  const [result, setResult] = useState<Result | null>(null)\n  const onChangeHandler = (value: string) => {\n    setValue(value)\n  }\n  const onBlurHandler = (value: string) => {\n    onChangeHandler(value)\n  }\n\n  useEffect(() => {\n    setResult(parseFormula(value, percent))\n    history.replace(`/formula/${value}/${percent}`)\n  }, [history, percent, value])\n\n  return (\n    <Flex sx={\n      {\n        justifyContent: 'center'\n      }\n    }>\n      <Box width='936px'>\n        <Flex sx={{\n          justifyContent: \"space-between\",\n          '@media screen and (max-width: 1350px)': {\n            justifyContent: \"flex-start\",\n          }\n        }}>\n          <Heading>Парсер формул</Heading>\n        </Flex>\n        <Flex>\n          <Input\n            value={value}\n            placeholder={\"MgSO4*7H2O\"}\n            onChange={event => onChangeHandler(event.target.value)}\n            onBlur={event => onBlurHandler(event.target.value)}\n          />\n          <Input\n            type=\"number\"\n            step=\"0.1\"\n            min={0}\n            max={100}\n            value={percent}\n            onChange={event => setPercent(parseFloat(event.target.value))}\n            flex={1}\n            minWidth=\"5em\"\n          />\n        </Flex>\n        {result ? (\n          <Flex flexDirection=\"column\">\n            <Box>\n              <b>Формула: </b> {result.formula}\n            </Box>\n            <Box>\n              <Heading fontSize={3} marginTop={3}>\n                Атомная масса\n              </Heading>\n              <table>\n                <thead>\n                <tr>\n                  <th>Атом</th>\n                  <th>Масса</th>\n                  <th>Количество</th>\n                  <th>Сумма</th>\n                  <th>Массовая доля</th>\n                </tr>\n                </thead>\n                <tbody>\n                {entries(result.decomposed_formula).map(([a, c]) => (\n                  <tr>\n                    <th>{a}</th>\n                    <td>{c.mass}</td>\n                    <td>{c.count}</td>\n                    <td>{round(c.totalMass,2)}</td>\n                    <td>{round(c.massPart * 100,2)}</td>\n                  </tr>\n                ))}\n                <tr>\n                  <th colSpan={3}>Итого</th>\n                  <td>{round(sum(values(result.decomposed_formula).map(c => c.totalMass)), 2)}</td>\n                </tr>\n                </tbody>\n              </table>\n            </Box>\n            <Box>\n              <Heading fontSize={3} marginTop={3}>\n                NPK оксидов\n              </Heading>\n              <table\n                style={{\n                  textAlign: \"center\",\n                  width: \"50%\"\n                }}\n              >\n                <thead>\n                <tr>\n                  {FERTILIZER_ELEMENT_NAMES.map(e => <th>{e}</th>)}\n                </tr>\n                </thead>\n                <tbody>\n                <tr>\n                  {FERTILIZER_ELEMENT_NAMES.map(e => <td>{result?.oxide_npk[e]}</td>)}\n                </tr>\n                </tbody>\n              </table>\n\n            </Box>\n            <Box>\n              <Heading fontSize={3} marginTop={3}>\n                NPK чистых веществ\n              </Heading>\n              <table\n                style={{\n                textAlign: \"center\",\n                width: \"50%\"\n              }}\n              >\n                <thead>\n                <tr>\n                  {FERTILIZER_ELEMENT_NAMES.map(e => <th>{e}</th>)}\n                </tr>\n                </thead>\n                <tbody>\n                <tr>\n                  {FERTILIZER_ELEMENT_NAMES.map(e => <td>{result?.npk[e]}</td>)}\n                </tr>\n                </tbody>\n              </table>\n\n            </Box>\n          </Flex>\n        ) : null}\n\n\n      </Box>\n    </Flex>\n  )\n}\n"],"sourceRoot":""}