(this["webpackJsonpfertilizer-calculator"]=this["webpackJsonpfertilizer-calculator"]||[]).push([[5],{251:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(5),r=n(93),l=n(0),c=n.n(l),i=n(19),o=n(101),u=Object(l.forwardRef)((function(e,t){var n,u=e.component,m=e.size,f=void 0===m?"1.5em":m,d=e.children,s=Object(r.a)(e,["component","size","children"]),b=Object(l.useState)(f||0),v=Object(a.a)(b,2),p=v[0],E=v[1],O=Object(o.a)();Object(l.useEffect)((function(){var e;!f&&t&&"current"in t&&E((null===(e=t.current)||void 0===e?void 0:e.offsetWidth)||0)}),[t,E,f]);var j=0;return d&&(j=2),c.a.createElement(i.b,Object.assign({type:"button"},s,{ref:t}),c.a.createElement(u,{color:null===(n=O.colors)||void 0===n?void 0:n.background,size:p,style:{marginRight:j}}),d)}))},252:function(e,t,n){"use strict";function a(e){return e&&parseInt(e)}function r(e){return e&&parseFloat(e)}n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r}))},254:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(93),r=n(0),l=n.n(r),c=n(151),i=n(66),o=n(250),u=n(68);function m(){var e=Object(i.a)(["\n  ::-webkit-inner-spin-button, ::-webkit-outer-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n    width: 0;\n    height: 0;\n  }\n  -moz-appearance: textfield;\n"]);return m=function(){return e},e}var f=Object(u.b)(o.b)(m()),d=function(e){var t=e.input,n=e.label,r=e.type,c=void 0===r?"text":r,i=Object(a.a)(e,["input","label","type"]);return l.a.createElement(f,Object.assign({},i,t,{type:c,lang:"en-US",placeholder:n}))},s=function(e){var t=e.name,n=Object(a.a)(e,["name"]);return l.a.createElement(c.a,Object.assign({component:d,name:t},n))}},256:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return u}));var a=n(0),r=n(92),l=n(127),c=n(113),i=n(39);function o(){return Object(a.useContext)(l.a).form}function u(e){var t=Object(r.c)();return[Object(r.d)((function(t){return Object(c.a)(e)(t)})),function(n,a){t(Object(i.a)(e,n,a))}]}},261:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(93),r=n(0),l=n.n(r),c=n(250),i=n(151),o=function(e){var t=e.input,n=e.label,r=Object(a.a)(e,["input","label"]);return l.a.createElement(c.c,null,l.a.createElement(c.a,Object.assign({},r,t,{checked:t.value})),n)},u=function(e){var t=e.name,n=Object(a.a)(e,["name"]);return l.a.createElement(i.a,Object.assign({component:o,name:t},n))}},262:function(e,t,n){"use strict";n.d(t,"a",(function(){return D}));var a=n(5),r=n(66),l=n(0),c=n.n(l),i=n(250),o=n(19),u=n(46),m=n(20),f=n.n(m),d=n(53),s=n.n(d),b=n(100),v=n.n(b),p=n(99),E=n(36);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function j(e){return Object.keys(e).reduce((function(t,n){var a;return a=n,Object(E.a)(a)&&(t[n]=e[n]),t}),{})}var g=l.forwardRef((function(e,t){var n=e.children,a=e.iconAttrs,r=(e.iconVerticalAlign,e.iconViewBox),c=e.size,i=e.title,o=v()(e,["children","iconAttrs","iconVerticalAlign","iconViewBox","size","title"]),u=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({viewBox:r,height:void 0!==e.height?e.height:c,width:void 0!==e.width?e.width:c,"aria-hidden":null==i?"true":void 0,focusable:"false",role:null!=i?"img":void 0},a),m=j(o);return l.createElement("svg",f()({},u,m,{ref:t}),i&&l.createElement("title",{key:"icon-title"},i),n)})),h=Object(p.a)(g,{target:"ex0cdmw0",label:"EmotionIconBase"})("display:inline-block;vertical-align:",(function(e){return e.iconVerticalAlign}),";overflow:hidden;"),y=l.forwardRef((function(e,t){return l.createElement(h,f()({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 24 24"},e,{ref:t}),l.createElement("path",{d:"M5 21h14c1.103 0 2-.897 2-2V5c0-1.103-.897-2-2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2zM7.707 9.293L12 13.586l4.293-4.293 1.414 1.414L12 16.414l-5.707-5.707 1.414-1.414z"}))}));y.displayName="ChevronDownSquare";var x=c.a.createContext({}),w=n(68);function C(){var e=Object(r.a)(["\n      pointer-events: none;\n      opacity: 0.4;\n  "]);return C=function(){return e},e}function _(){var e=Object(r.a)(["\n  ","\n\n"]);return _=function(){return e},e}var z=function(e){var t=e.children;return c.a.createElement(o.d,{padding:2,sx:{position:"relative",zIndex:1,"&::before":{backgroundColor:"highlight",content:'""',position:"absolute",left:0,top:0,opacity:0,width:"100%",height:"100%",zIndex:-1},"&:hover::before":{opacity:.1}}},t)},k=Object(w.b)(o.a)(_(),(function(e){return e.disabled&&Object(w.a)(C())}));function S(e){var t=e.value,n=e.index,a=Object(l.useContext)(x);return c.a.createElement(k,{onClick:function(){a.onItemClick&&a.onItemClick(t)},disabled:a.checkDisabledItem&&a.checkDisabledItem(t)},c.a.createElement(z,null,a.renderItem?c.a.createElement(a.renderItem,{item:t,index:n}):t+""))}function I(e){var t=e.items,n=Object(l.useRef)(),r=Object(l.useState)(0),i=Object(a.a)(r,2),u=i[0],m=i[1];return Object(l.useEffect)((function(){var e;m((null===n||void 0===n||null===(e=n.current)||void 0===e?void 0:e.offsetHeight)||0)}),[n]),c.a.createElement(o.c,{backgroundColor:"background",padding:0,maxHeight:5*u,overflowY:"auto",sx:{zIndex:3}},c.a.createElement(o.d,{flexDirection:"column"},Array.from(t).map((function(e,a){return c.a.createElement(o.a,{ref:0===a?n:null},c.a.createElement(S,{value:e,index:a,key:a}),a<t.length-1?c.a.createElement("hr",{style:{margin:0}}):null)}))))}function N(){var e=Object(r.a)(["\n  color: ",";\n  height: 3rem;\n  opacity: 0.5;\n  \n  &:hover {\n    opacity: 0.7;\n  }\n"]);return N=function(){return e},e}var A=Object(u.default)(y)(N(),(function(e){return e.theme.colors.text}));function D(e){var t=e.width,n=function(t){return e.renderValue?e.renderValue(t):(t||"")+""},r=Object(l.useState)(!1),u=Object(a.a)(r,2),m=u[0],f=u[1],d=Object(l.useState)(e.value||null),s=Object(a.a)(d,2),b=s[0],v=s[1],p=Object(l.useState)(n(e.value||null)),E=Object(a.a)(p,2),O=E[0],j=E[1],g=Object(l.useState)(!1),h=Object(a.a)(g,2),y=h[0],w=h[1],C=Object(l.useRef)();Object(l.useEffect)((function(){function e(e){C.current&&!C.current.contains(e.target)&&f(!1)}return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[C]);var _=function(t){v(t),j(n(t)),e.onChange&&e.onChange(t),w(!1),f(!1)},z={onItemClick:_,renderItem:e.renderItem,checkDisabledItem:e.checkDisabledItem};return c.a.createElement(x.Provider,{value:z},c.a.createElement(o.d,{flexDirection:"column",width:t,ref:C},c.a.createElement(o.d,{sx:{position:"relative"}},c.a.createElement(i.b,{value:O,onChange:function(e){var t=e.target.value;j(t),w(!0),f(!1)},onKeyDown:function(t){t.stopPropagation(),"Enter"===t.key&&e.onEdit&&e.onEdit(O),"Escape"===t.key&&_(b)},onBlur:function(){y&&O&&e.onEdit&&e.onEdit(O)}}),c.a.createElement(o.a,{sx:{position:"absolute",right:0}},c.a.createElement(A,{onClick:function(){return f(!m)}}))),c.a.createElement(o.d,{sx:{position:"relative"}},c.a.createElement(o.d,{sx:{position:"absolute"},flexDirection:"column",width:"100%"},m&&c.a.createElement(I,{items:e.items})))))}},263:function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var a=n(5),r=n(0),l=n.n(r),c=n(66),i=n(52),o=n.n(i),u=n(19),m=n(46),f=n(102);function d(){var e=Object(c.a)(["\n  overflow-y: auto;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: ",";\n  left: 0;\n  justify-content: center;\n  align-items: center;\n  background-color: rgba(255, 255, 255, 0.5);\n  z-index: 999;\n  \n  // Mobile\n  @media screen and (max-height: 500px), screen and (max-width: 500px) {\n    align-items: initial;\n  }\n"]);return d=function(){return e},e}var s=Object(m.default)(u.d)(d(),(function(){return"".concat(window.pageYOffset,"px")}));function b(e){var t=e.children,n=function(){var e=document.querySelector("#modal-root");return e||((e=document.createElement("div")).setAttribute("id","modal-root"),document.body.appendChild(e)),e}();return o.a.createPortal(l.a.createElement(l.a.Fragment,null,l.a.createElement(f.a,null,l.a.createElement("style",{type:"text/css"},"\n          body {\n            overflow: hidden;\n          }\n        ")),l.a.createElement(s,null,l.a.createElement(u.c,{backgroundColor:"#fff",height:"max-content"},t))),n)}var v=n(84),p=n(97);function E(e){var t=e.opened,n=void 0!==t&&t,c=e.button,i=e.container,o=Object(r.useState)(!n),m=Object(a.a)(o,2),f=m[0],d=m[1];Object(r.useEffect)((function(){d(!n)}),[n]),Object(r.useEffect)((function(){f&&e.onClose&&e.onClose()}),[f,e]);var s={open:function(){return d(!1)},close:function(){return d(!0)}},E={modal:s};return l.a.createElement(l.a.Fragment,null,c&&c(E),f?null:l.a.createElement(b,null,l.a.createElement(u.d,{justifyContent:"space-between"},l.a.createElement(u.e,{fontSize:2},e.title),l.a.createElement(v.a,{component:p.a,onClick:s.close})),l.a.createElement(u.a,null,i(E))))}},266:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));var a=n(318),r=n.n(a),l=n(335),c=n.n(l),i=r.a,o=c.a},270:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return f}));var a=n(0),r=n.n(a),l=n(19),c=n(97),i=n(44),o=n(6),u=n(251),m=function(e){var t=e.name,n=e.value,a=e.delta,c=t;return e.isOxide&&i.a.hasOwnProperty(t)&&(c=i.a[t]),r.a.createElement(l.a,{bg:t,flex:1,mx:"2px",px:1,color:"black",minWidth:"2.1em",maxWidth:"4em",fontSize:1},r.a.createElement(l.d,{flexDirection:"column",alignItems:"center"},r.a.createElement(l.a,null,c),r.a.createElement(l.a,null,n),"undefined"!==typeof a?r.a.createElement(l.a,null,a):null))},f=function(e){var t=e.item,n=e.onRemove,a=e.weight,f=Object(i.e)(t,!1);return r.a.createElement(l.c,{width:"auto"},r.a.createElement(l.d,{justifyContent:"space-between",alignItems:"center"},r.a.createElement(l.a,{flex:1},r.a.createElement(l.f,{flex:1},t.id),r.a.createElement(l.d,null,o.b.map((function(e){var t=f.elements[e];return t?r.a.createElement(m,{name:e,key:e,value:t,isOxide:!0}):null})))),r.a.createElement(l.d,null,r.a.createElement(l.d,{alignItems:"center",justifyContent:"center",margin:1},a?r.a.createElement(l.f,{textAlign:"center",minWidth:"3em"},a.weight,"\u0433",a.volume?r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("span",{title:"\u041e\u0431\u044a\u0435\u043c \u0438\u043b\u0438 \u0432\u0435\u0441 \u0440\u0430\u0441\u0442\u0432\u043e\u0440\u0430"},a.volume&&"".concat(a.volume," \u043c\u043b").concat(a.liquid_weight?", ".concat(a.liquid_weight,"\u0433"):""))):null):null),r.a.createElement(u.a,{padding:1,alignSelf:"center",component:c.a,onClick:function(){return n()}}))))}},275:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(){var e=document.createElement("a");return document.body.appendChild(e),e.setAttribute("style","display: none"),function(t,n){var a=new Blob([t],{type:"octet/stream"}),r=window.URL.createObjectURL(a);e.href=r,e.download=n,e.click(),window.URL.revokeObjectURL(r)}}()},276:function(e,t,n){"use strict";n.d(t,"c",(function(){return h})),n.d(t,"b",(function(){return y})),n.d(t,"a",(function(){return x}));var a=n(93),r=n(8),l=n(0),c=n.n(l),i=n(19),o=n(149),u=n(152),m=n(150),f=n(254),d=n(44),s=n(6),b=n(252),v=function(e){var t=e.name,n=e.disabled,a=t;return d.a.hasOwnProperty(t)&&(a=d.a[t]),c.a.createElement(i.d,{flexDirection:"column",justifyContent:"center",alignItems:"center",width:"4rem"},c.a.createElement("label",{style:{textAlign:"center"}},a),c.a.createElement(f.a,{name:"npk."+t,type:"number",min:"0",max:"100",autoComplete:"off",width:"3rem",style:{textAlign:"center"},normalize:b.a,disabled:n}))},p=n(62),E=n(261),O=function(e){var t=e.fields;return c.a.createElement(i.c,{width:"100%"},c.a.createElement(i.d,null,c.a.createElement("button",{type:"button",onClick:function(){return t.push({formula:"",percent:98})}},"+")),c.a.createElement(i.d,{flexDirection:"column"},t.map((function(e,n){return c.a.createElement(i.d,{key:n,width:"100%"},c.a.createElement(f.a,{name:"".concat(e,".formula"),flex:2}),c.a.createElement(f.a,{name:"".concat(e,".percent"),type:"number",step:"0.1",min:"0",max:"100",normalize:b.a,flex:1}),c.a.createElement("button",{type:"button",onClick:function(){return t.remove(n)}},"-"))}))))},j=n(256),g=n(250);function h(e){var t=Object(r.a)({},e);return e.composition&&(t.npk=Object(d.e)(e,!1).elements,t.composition_enable=!0),e.solution_concentration&&(t.solution_concentration=e.solution_concentration,t.solution_density=e.solution_density||1e3,t.solution_density_enable=!0),t}function y(e){var t=e.composition_enable,n=e.composition,r=e.npk,l=e.solution_density_enable,c=e.solution_density,i=e.solution_concentration,o=Object(a.a)(e,["composition_enable","composition","npk","solution_density_enable","solution_density","solution_concentration"]);return t?o.composition=n:o.npk=r,l&&(o.solution_density=c,o.solution_concentration=i),o}var x=Object(m.a)({form:p.a,enableReinitialize:!0})((function(e){var t=Object(j.b)(Object(j.a)())[0];return c.a.createElement(o.a,null,c.a.createElement(i.d,{flexDirection:"column"},c.a.createElement(f.a,{name:"id",title:"Name",label:"Name"}),c.a.createElement(i.a,null,"\u041c\u0430\u043a\u0440\u043e\u044d\u043b\u0435\u043c\u0435\u043d\u0442\u044b"),c.a.createElement(i.d,null,s.c.map((function(e){return c.a.createElement(v,{name:e,disabled:t.composition_enable})}))),c.a.createElement(i.a,null,"\u041c\u0438\u043a\u0440\u043e\u044d\u043b\u0435\u043c\u0435\u043d\u0442\u044b"),c.a.createElement(i.d,null,s.d.map((function(e){return c.a.createElement(v,{name:e,disabled:t.composition_enable})}))),c.a.createElement(i.d,null,c.a.createElement(E.a,{name:"composition_enable",label:"\u0424\u043e\u0440\u043c\u0443\u043b\u0430"})),t.composition_enable?c.a.createElement(i.d,null,c.a.createElement(u.a,{name:"composition",component:O})):null,c.a.createElement(i.d,{alignItems:"center"},c.a.createElement(i.a,{width:"auto",marginRight:2},c.a.createElement(E.a,{name:"solution_density_enable",label:"\u0420\u0430\u0441\u0442\u0432\u043e\u0440"})),t.solution_density_enable?c.a.createElement(i.d,{flexDirection:"column"},c.a.createElement(i.d,{alignItems:"flex-end"},c.a.createElement(g.c,{flexDirection:"column"},"\u041a\u043e\u043d\u0446\u0435\u043d\u0442\u0440\u0430\u0446\u0438\u044f",c.a.createElement(f.a,{name:"solution_concentration",type:"number",step:"0.1",min:"0",max:"3000",normalize:b.a,width:"5em",marginRight:2}),c.a.createElement(i.f,{sx:{whiteSpace:"nowrap"}},"\u0433/\u043b"))),c.a.createElement(i.d,{alignItems:"flex-end"},c.a.createElement(g.c,{flexDirection:"column"},"\u041f\u043b\u043e\u0442\u043d\u043e\u0441\u0442\u044c",c.a.createElement(f.a,{name:"solution_density",type:"number",step:"1",min:"800",max:"3000",normalize:b.b,width:"5em",marginRight:2})),c.a.createElement(i.f,{sx:{whiteSpace:"nowrap"}},"\u0433/\u043b"))):null),c.a.createElement(i.d,null,c.a.createElement(g.c,{flexDirection:"column"},"\u041c\u0438\u043a\u0441\u0435\u0440, \u043d\u043e\u043c\u0435\u0440 \u043f\u043e\u043c\u043f\u044b",c.a.createElement(f.a,{name:"pump_number",type:"number",step:"1",min:"1",max:"16",required:!1,normalize:b.b,maxWidth:"3em"})))))}))},331:function(e,t){},332:function(e,t){},490:function(e,t,n){"use strict";n.r(t),n.d(t,"CalculatorContainer",(function(){return Xe}));var a=n(8),r=n(0),l=n.n(r),c=n(19),i=n(337),o=n(149),u=n(150),m=n(92),f=n(11),d=n(270),s=n(5),b=n(262),v=n(305),p=n(251),E=function(e){var t=e.onAdd,n=Object(m.d)((function(e){return e.calculator})).fertilizers,a=Object(m.d)((function(e){return e.calculator})).calculationForm,i=Object(r.useState)(n[0]),o=Object(s.a)(i,2),u=o[0],f=o[1],d=((null===a||void 0===a?void 0:a.fertilizers)||[]).map((function(e){return null===e||void 0===e?void 0:e.id}));return l.a.createElement(c.c,null,l.a.createElement(c.d,{flexDirection:"column"},l.a.createElement(c.d,{justifyContent:"space-between"},l.a.createElement(c.a,{flex:1,pr:2},l.a.createElement(b.a,{value:u,items:n,onChange:function(e){e&&f(e)},checkDisabledItem:function(e){return d.includes((null===e||void 0===e?void 0:e.id)||"")},renderItem:function(e){var n=e.item;return l.a.createElement(c.d,{flex:1,justifyContent:"space-between"},l.a.createElement(c.a,null,n.id),l.a.createElement(p.a,{onClick:function(e){e.stopPropagation(),function(e){t(e)}(n)},component:v.a}))},renderValue:function(e){return(null===e||void 0===e?void 0:e.id)||""}})))))},O=function(e){var t=e.fields,n=e.meta.error,a=Object(m.d)((function(e){return e.calculator})),r=a.calculationForm,i=a.result,o=(null===r||void 0===r?void 0:r.fertilizers)||[],u=Object.fromEntries(((null===i||void 0===i?void 0:i.fertilizers)||[]).map((function(e){return[e.id,e]})));return l.a.createElement(c.d,{sx:{flexDirection:"column"},width:"auto"},l.a.createElement(E,{onAdd:function(e){var n,a=Object(f.a)(o);try{for(a.s();!(n=a.n()).done;){if(n.value.id===e.id)return}}catch(r){a.e(r)}finally{a.f()}t.push(e)}}),l.a.createElement(c.d,{sx:{flexDirection:"column","& > *":{marginTop:"8px !important"}}},n?l.a.createElement("span",null,n):null,o.map((function(e,n){return l.a.createElement(d.b,{item:e,key:e.id,weight:u[e.id],onRemove:function(){return t.remove(n)}})}))))},j=n(152);var g=function(){return l.a.createElement(j.a,{name:"fertilizers",component:O,validate:(e="\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0443\u0434\u043e\u0431\u0440\u0435\u043d\u0438\u044f",e=e||"\u0414\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e",function(t){if(!t||!(null===t||void 0===t?void 0:t.length))return e})});var e},h=n(261),y=function(){return l.a.createElement(c.c,null,l.a.createElement(c.d,{flexDirection:"column"},l.a.createElement(c.e,{fontSize:2},"\u0418\u0433\u043d\u043e\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c"),l.a.createElement(h.a,{name:"ignore.Ca",label:"\u041a\u0430\u043b\u044c\u0446\u0438\u0439"}),l.a.createElement(h.a,{name:"ignore.Mg",label:"\u041c\u0430\u0433\u043d\u0438\u0439"}),l.a.createElement(h.a,{name:"ignore.S",label:"\u0421\u0435\u0440\u0430"}),l.a.createElement(h.a,{name:"ignore.Cl",label:"\u0425\u043b\u043e\u0440"})))},x=n(93),w=n(250),C=n(151),_=function(e){var t=e.input,n=e.label,a=(e.value,Object(x.a)(e,["input","label","value"]));return l.a.createElement(w.c,null,l.a.createElement(w.d,Object.assign({},a,t)),n)},z=function(e){var t=e.name,n=e.value,a=e.normalize,r=void 0===a?function(e){return e.toString()}:a,c=Object(x.a)(e,["name","value","normalize"]);return l.a.createElement(C.a,Object.assign({component:_,name:t,normalize:r,type:"radio",value:r(n)},c))},k=n(252),S=[.2,.1,.05,.01],I=function(){return l.a.createElement(c.c,null,l.a.createElement(c.d,{flexDirection:"column"},l.a.createElement(c.e,{fontSize:2},"\u0422\u043e\u0447\u043d\u043e\u0441\u0442\u044c"),S.map((function(e){return l.a.createElement(z,{name:"accuracy",value:e,label:"".concat(e," \u0433."),normalize:k.a})}))))},N=n(70),A=n(254),D=n(113),F=n(39),V=n(10),R=n(96),H=function(){var e=Object(m.d)(Object(D.a)(V.m)),t=e.topping_up_enabled,n=e.solution_concentration,r=Object(m.c)(),i=function(e){return function(t){if(t.target.value){var l=parseFloat(t.target.value),c={};"k"===e?c.k=l:delete(c=Object(a.a)({},n,Object(N.a)({},e,l))).k;var i=Object(R.c)(c);r(Object(F.a)(V.m,"solution_concentration",i))}}};return l.a.createElement(c.c,null,l.a.createElement(c.e,{fontSize:2},"\u0420\u0430\u0441\u0442\u0432\u043e\u0440"),l.a.createElement(c.d,{flexDirection:"column"},l.a.createElement(c.d,{alignItems:"center",justifyContent:"space-between"},l.a.createElement(w.c,{htmlFor:"solution_volume"},"\u041e\u0431\u044a\u0435\u043c, \u043b"),l.a.createElement(A.a,{disabled:t,name:"solution_volume",width:"4rem",type:"number",step:"0.05",min:"0.1",max:"100",normalize:k.a,style:{textAlign:"center"},autoComplete:"off"})),l.a.createElement(c.d,{alignItems:"center",justifyContent:"space-between",paddingTop:2},l.a.createElement(w.c,{htmlFor:"solution_concentration.k"},"\u041a\u043e\u043d\u0446\u0435\u043d\u0442\u0440\u0430\u0446\u0438\u044f")),l.a.createElement(c.d,{alignItems:"center",paddingTop:2},l.a.createElement(c.f,{fontSize:"2rem"},"1:"),l.a.createElement(A.a,{disabled:t,name:"solution_concentration.k",type:"number",step:"0.01",width:"auto",min:"1",max:"1000",normalize:k.a,style:{textAlign:"center"},autoComplete:"off",onChange:i("k")})),l.a.createElement(c.d,{alignItems:"center",paddingTop:2},"\u0418\u043b\u0438",l.a.createElement(A.a,{disabled:t,name:"solution_concentration.v_1",width:"4rem",type:"number",step:"0.01",min:"1",normalize:k.a,style:{textAlign:"center"},autoComplete:"off",onChange:i("v_1")})," \u043c\u043b \u043d\u0430",l.a.createElement(A.a,{disabled:t,name:"solution_concentration.v_2",width:"4rem",type:"number",step:"0.01",min:"0",normalize:k.a,style:{textAlign:"center"},autoComplete:"off",onChange:i("v_2")})," \u043c\u043b \u0440\u0430\u0431\u043e\u0447\u0435\u0433\u043e \u0440\u0430\u0441\u0442\u0432\u043e\u0440\u0430"),l.a.createElement(c.d,{alignItems:"center",justifyContent:"space-between",paddingTop:2})))},M=function(){var e=Object(m.d)(Object(D.a)(V.m)),t=e.dilution_enabled,n=e.dilution_concentration,r=Object(m.c)(),i=function(e){return function(t){if(t.target.value){var l=parseFloat(t.target.value),c={};"k"===e?c.k=l:delete(c=Object(a.a)({},n,Object(N.a)({},e,l))).k;var i=Object(R.c)(c);r(Object(F.a)(V.m,"dilution_concentration",i))}}};return l.a.createElement(c.c,null,l.a.createElement(h.a,{name:"dilution_enabled",label:"\u0420\u0430\u0437\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043a\u043e\u043d\u0446\u0435\u043d\u0442\u0440\u0430\u0442\u0430"}),l.a.createElement(c.d,{flexDirection:"column",style:{display:t?"flex":"none"}},l.a.createElement(c.d,{alignItems:"center",justifyContent:"space-between"},l.a.createElement(w.c,{htmlFor:"dilution_volume"},"\u041e\u0431\u044a\u0435\u043c, \u043b"),l.a.createElement(A.a,{name:"dilution_volume",width:"3rem",type:"number",step:"1",min:"1",pattern:"^\\d+$",normalize:k.b,style:{textAlign:"center"},autoComplete:"off"})),l.a.createElement(c.d,null,l.a.createElement(w.c,{htmlFor:"dilution_concentration.k"},"\u041a\u043e\u043d\u0446\u0435\u043d\u0442\u0440\u0430\u0446\u0438\u044f")),l.a.createElement(c.d,{alignItems:"center",paddingTop:2},l.a.createElement(c.f,{fontSize:"2rem"},"1:"),l.a.createElement(A.a,{name:"dilution_concentration.k",type:"number",width:"auto",step:"0.1",min:"1",max:"2000",normalize:k.a,style:{textAlign:"center"},autoComplete:"off",onChange:i("k")})),l.a.createElement(c.d,{alignItems:"center"},"\u0418\u043b\u0438",l.a.createElement(A.a,{name:"dilution_concentration.v_1",type:"number",width:"4rem",step:"0.1",min:"0",max:"50000",normalize:k.a,style:{textAlign:"center"},autoComplete:"off",onChange:i("v_1")}),"\u043c\u043b \u043d\u0430",l.a.createElement(A.a,{name:"dilution_concentration.v_2",type:"number",width:"4rem",step:"1",min:"0",max:"1000000",normalize:k.a,style:{textAlign:"center"},autoComplete:"off",onChange:i("v_2")}),"\u043c\u043b. \u0440\u0430\u0431\u043e\u0447\u0435\u0433\u043e \u0440\u0430\u0441\u0442\u0432\u043e\u0440\u0430")))},K=function(){var e=Object(m.d)(Object(D.a)(V.m)).topping_up_enabled;return l.a.createElement(c.c,null,l.a.createElement(h.a,{name:"topping_up_enabled",label:"\u0414\u043e\u043b\u0438\u0432 \u0440\u0430\u0441\u0442\u0432\u043e\u0440\u0430"}),e?l.a.createElement(c.d,{flexDirection:"column",style:{display:e?"flex":"none"}},l.a.createElement(c.d,{alignItems:"center",justifyContent:"space-between"},l.a.createElement(w.c,{htmlFor:"topping_up.newSolution.volume"},"\u041d\u043e\u0432\u044b\u0439 \u043e\u0431\u044a\u0435\u043c, \u043b"),l.a.createElement(A.a,{name:"topping_up.newSolution.volume",width:"3rem",type:"number",step:"0.1",min:"1",pattern:"^\\d+$",normalize:k.b,required:!0,style:{textAlign:"center"},autoComplete:"off"})),l.a.createElement(c.d,{alignItems:"center",justifyContent:"space-between"},l.a.createElement(w.c,{htmlFor:"topping_up.currentSolution.volume"},"\u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u043e\u0431\u044a\u0435\u043c, \u043b"),l.a.createElement(A.a,{name:"topping_up.currentSolution.volume",width:"3rem",type:"number",step:"0.1",min:"1",pattern:"^\\d+$",normalize:k.b,style:{textAlign:"center"},autoComplete:"off"})),l.a.createElement(c.d,{alignItems:"center",justifyContent:"space-between",paddingTop:2},l.a.createElement(w.c,{htmlFor:"topping_up.currentSolution.EC"},"\u0422\u0435\u043a\u0443\u0449\u0438\u0439 EC, \u043c\u0421\u043c/\u0441\u043c"),l.a.createElement(A.a,{name:"topping_up.currentSolution.EC",width:"3rem",type:"number",step:"0.01",min:"0",max:"10",normalize:k.a,style:{textAlign:"center"},autoComplete:"off"})),l.a.createElement(c.d,{alignItems:"center",justifyContent:"space-between",paddingTop:2},l.a.createElement(w.c,{htmlFor:"topping_up.currentSolution.profileEC"},"EC \u043f\u0440\u043e\u0444\u0438\u043b\u044f \u0440\u0430\u0441\u0442\u0432\u043e\u0440\u0430, \u043c\u0421\u043c/\u0441\u043c"),l.a.createElement(A.a,{name:"topping_up.currentSolution.profileEC",width:"3rem",type:"number",step:"0.01",min:"0",max:"10",normalize:k.a,style:{textAlign:"center"},autoComplete:"off"})),l.a.createElement(c.d,{alignItems:"center",justifyContent:"space-between",paddingTop:2},l.a.createElement(w.c,{htmlFor:"topping_up.currentSolution.profileSaltsConcentration"},"\u041a\u043e\u043d\u0446\u0435\u043d\u0442\u0440\u0430\u0446\u0438\u044f \u0441\u043e\u043b\u0435\u0439 \u043f\u0440\u043e\u0444\u0438\u043b\u044f \u0440\u0430\u0441\u0442\u0432\u043e\u0440\u0430, \u0433/\u043b"),l.a.createElement(A.a,{name:"topping_up.currentSolution.profileSaltsConcentration",width:"3rem",type:"number",step:"0.01",min:"0",max:"10",normalize:k.a,style:{textAlign:"center"},autoComplete:"off"}))):null)},P=function(){return l.a.createElement(c.d,{flexDirection:"column"},l.a.createElement(c.a,{flex:1},l.a.createElement(c.b,{width:"100%",my:2,type:"submit"},"Calculate")),l.a.createElement(c.a,{my:2},l.a.createElement(H,null)),l.a.createElement(c.a,{my:2},l.a.createElement(K,null)),l.a.createElement(c.a,{my:2},l.a.createElement(M,null)),l.a.createElement(c.d,{sx:{"& > *":{flex:1}}},l.a.createElement(y,null),l.a.createElement(c.a,{marginLeft:2},l.a.createElement(I,null))))},T=n(66),B=n(6),L=n(68),W=n(21),U=n(20),q=n.n(U),J=n(40),Y=r.forwardRef((function(e,t){return r.createElement(J.a,q()({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 640 512"},e,{ref:t}),r.createElement("path",{fill:"currentColor",d:"M256.47 216.77l86.73 109.18s-16.6 102.36-76.57 150.12C206.66 523.85 0 510.19 0 510.19s3.8-23.14 11-55.43l94.62-112.17c3.97-4.7-.87-11.62-6.65-9.5l-60.4 22.09c14.44-41.66 32.72-80.04 54.6-97.47 59.97-47.76 163.3-40.94 163.3-40.94zM636.53 31.03l-19.86-25c-5.49-6.9-15.52-8.05-22.41-2.56l-232.48 177.8-34.14-42.97c-5.09-6.41-15.14-5.21-18.59 2.21l-25.33 54.55 86.73 109.18 58.8-12.45c8-1.69 11.42-11.2 6.34-17.6l-34.09-42.92 232.48-177.8c6.89-5.48 8.04-15.53 2.55-22.44z"}))}));Y.displayName="Broom";var $=r.forwardRef((function(e,t){return r.createElement(J.a,q()({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 24 24"},e,{ref:t}),r.createElement("path",{fill:"none",d:"M9 14h6v5H9zm2-9h2v2h-2z"}),r.createElement("path",{fill:"none",d:"M7 14c0-1.103.897-2 2-2h6c1.103 0 2 .897 2 2v5h2.001L19 8.414 15.586 5H15v4H7V5H5v14h2v-5z"}),r.createElement("path",{d:"M5 21h14c1.103 0 2-.897 2-2V8a.997.997 0 00-.293-.707l-4-4A.996.996 0 0016 3H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2zm10-2H9v-5h6v5zM13 7h-2V5h2v2zM5 5h2v4h8V5h.586L19 8.414 19.001 19H17v-5c0-1.103-.897-2-2-2H9c-1.103 0-2 .897-2 2v5H5V5z"}))}));$.displayName="Save";var G=r.forwardRef((function(e,t){return r.createElement(J.a,q()({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 24 24"},e,{ref:t}),r.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}),r.createElement("path",{d:"M3 17v2h6v-2H3zM3 5v2h10V5H3zm10 16v-2h8v-2h-8v-2h-2v6h2zM7 9v2H3v2h4v2h2V9H7zm14 4v-2H11v2h10zm-6-4h2V7h4V5h-4V3h-2v6z"}))}));G.displayName="Tune";var Q=function(e){return"recipe.".concat(e)},X=function(e){var t=e.name;return l.a.createElement(c.d,{flexDirection:"column",justifyContent:"center",alignItems:"center",maxWidth:"3rem"},l.a.createElement(c.a,{style:{textAlign:"center"}},t),l.a.createElement(A.a,{name:Q(t),type:"number",step:"0.001",min:"0",max:"999",autoComplete:"off",normalize:k.b,maxWidth:"3rem",style:{textAlign:"center"}}))},Z=n(256),ee=n(45),te=n(263),ne=n(2);function ae(){var e=Object(T.a)(["\n  width: ","px;\n  height: 3em;\n  position: absolute;\n  z-index: 30;\n"]);return ae=function(){return e},e}function re(){var e=Object(T.a)(["\n  ::-webkit-inner-spin-button, ::-webkit-outer-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n    width: 0;\n    height: 0;\n  }\n  -moz-appearance: textfield;\n"]);return re=function(){return e},e}var le=Object(L.b)(w.b)(re()),ce=L.b.button(ae(),(function(e){return e.width})),ie=function(e){var t=parseFloat(e.step||1),n=Object(ne.a)(t),a=Object(r.useState)(e.value),i=Object(s.a)(a,2),o=i[0],u=i[1],m=Object(r.useState)(!1),f=Object(s.a)(m,2),d=f[0],b=f[1],v=Object(r.useState)(null),p=Object(s.a)(v,2),E=p[0],O=p[1],j=Object(r.useRef)(),g=Object(r.useRef)(),h=Object(r.useRef)();Object(r.useEffect)((function(){o!==e.value&&u(e.value)}),[e.value,o]),Object(r.useEffect)((function(){var e,t;O({width:(null===j||void 0===j||null===(e=j.current)||void 0===e?void 0:e.offsetWidth)||0,height:(null===j||void 0===j||null===(t=j.current)||void 0===t?void 0:t.offsetHeight)||0})}),[j]);var y=5-((null===E||void 0===E?void 0:E.height)||0);return l.a.createElement(c.d,{flexDirection:"column",sx:{position:"relative"}},d?l.a.createElement(ce,{ref:g,onClick:function(){var a;null===j||void 0===j||null===(a=j.current)||void 0===a||a.focus();var r=Object(ne.e)(o+t||1,n);u(r),e.onChange({target:{value:r}})},style:{top:"".concat(y,"px")},width:null===E||void 0===E?void 0:E.width},"^"):null,l.a.createElement(le,Object.assign({ref:j},e,{onFocus:function(){b(!0)},onBlur:function(e){[null===g||void 0===g?void 0:g.current,null===h||void 0===h?void 0:h.current].includes(e.relatedTarget)||b(!1)},lang:"en-US",value:o})),d?l.a.createElement(ce,{ref:h,onClick:function(){var a;null===j||void 0===j||null===(a=j.current)||void 0===a||a.focus();var r=Object(ne.e)(o-t||1,n);u(r),e.onChange({target:{value:r}})},style:{bottom:"".concat(y,"px")},width:null===E||void 0===E?void 0:E.width},"v"):null)},oe=n(65),ue=n(47),me=n(48),fe=n(56),de=n(57),se=function e(){Object(ue.a)(this,e)};se.ext=void 0;var be=n(44),ve=["CaNO3","KNO3","NH4NO3","MgSO4","KH2PO4","K2SO4","MgNO3","CaCl2"],pe=function(e){Object(de.a)(n,e);var t=Object(fe.a)(n);function n(){return Object(ue.a)(this,n),t.apply(this,arguments)}return Object(me.a)(n,[{key:"export",value:function(e){return""}},{key:"buildFertilizers",value:function(e){var t,n=[],a=Object(f.a)(ve);try{var r=function(){var a=t.value,r=Object(ne.b)(Object(be.e)({id:"",composition:[{formula:a,percent:100}]},!0).elements).filter((function(e){return e[1]})).map((function(e){return e[0]})),l=Object(be.d)(Object.fromEntries(r.map((function(t){return[t,e["".concat(a,"_").concat(t)]||0]})))),c={id:a,npk:l,solution_density:1e3*e["gml".concat(a)],solution_concentration:e["gl".concat(a)]},i=parseFloat(e["m".concat(a)].match(/\d+/))||void 0;i&&(c.pump_number=i),n.push(c)};for(a.s();!(t=a.n()).done;)r()}catch(b){a.e(b)}finally{a.f()}var l=Object.fromEntries(B.d.map((function(t){return[t,e["d".concat(t)]]})));if("TRUE"===e.chkComplex){var c=Object(be.c)("\u041c\u0438\u043a\u0440\u043e",l);c.solution_density=e.gmlCmplx,c.solution_concentration=e.glCmplx;var i=parseFloat(e.mCmplx.match(/\d+/));i&&(c.pump_number=i),n.push(c)}else{var o,u=Object(f.a)(B.d);try{for(u.s();!(o=u.n()).done;){var m=o.value;if(l[m]){var d=Object(be.c)(m,Object(N.a)({},m,l[m]||0));d.solution_density=e["gl".concat(m)],d.solution_concentration=e["gl".concat(m)];var s=parseFloat(e["m".concat(m)].match(/\d+/))||void 0;s&&(d.pump_number=s),n.push(d)}}}catch(b){u.e(b)}finally{u.f()}}return n}},{key:"import",value:function(e){var t,n=e.split("\n").map((function(e){return e.split("=")})).map((function(e){var t=Object(s.a)(e,2),n=t[0],a=t[1];return[n,Object(ne.h)(a)]})),a=Object.fromEntries(n),r=parseFloat(a.V||1),l=this.buildFertilizers(a),c=Object.fromEntries(n.filter((function(e){return B.b.includes(e[0])}))),i=Object(f.a)(B.d);try{for(i.s();!(t=i.n()).done;){var o=t.value,u=c[o];u&&(c[o]=u/1e3)}}catch(m){i.e(m)}finally{i.f()}return{meta:{version:a.version||"",created:"",ref:""},calculator:{calculationForm:{recipe:c,solution_volume:a.tAml/1e3,solution_concentration:Object(R.c)(1e3*r/a.tAml),dilution_enabled:!0,dilution_volume:r,dilution_concentration:Object(R.c)(1),accuracy:.01,fertilizers:l.filter((function(e){return"K2SO4"===e.id?"TRUE"===a.chK2SO4:"MgNO3"!==e.id||"TRUE"===a.chMgNO3})),mixerOptions:{url:a.addrMixer}},result:null,fertilizers:l,recipes:[]}}}}],[{key:"parseProfileString",value:function(e){var t,n={},a=Object(f.a)(e.split(" "));try{for(a.s();!(t=a.n()).done;){var r=t.value;if(r=r.trim()){var l=r.split("=");2===l.length&&B.b.includes(l[0].trim())&&(n[l[0]]=parseFloat(l[1]))}}}catch(c){a.e(c)}finally{a.f()}return n}},{key:"stringifyProfile",value:function(e){var t=B.b.map((function(t){return"undefined"!=typeof e[t]&&"".concat(t,"=").concat(e[t])})).filter((function(e){return e})).join(" ");return"N=".concat((e.NO3||0)+(e.NH4||0)," ").concat(t)}}]),n}(se);pe.ext=".hpg";var Ee=oe.a.filter((function(e){return!["NH4","NO3"].includes(e)})),Oe=["K:N","K:Ca","K:Mg","NH4:NO3","P","Cl","EC"],je=["N:Ca","Ca:N","Ca:K","Ca:Mg","Mg:K","Mg:Ca"];function ge(e){var t=Object(Z.b)(Object(Z.a)())[0],n=Object(r.useState)(t.recipe),i=Object(s.a)(n,2),o=i[0],u=i[1],m=Object(W.f)(o),f=Object(r.useState)(m.ratio),d=Object(s.a)(f,2),b=d[0],v=d[1],p=Object(r.useState)(m.EC),E=Object(s.a)(p,2),O=E[0],j=E[1],g=Object(r.useState)(pe.stringifyProfile(t.recipe)),h=Object(s.a)(g,2),y=h[0],x=h[1],C=function(e,t){var n=Object(a.a)({},o,Object(N.a)({},e,t));"S"===e?n.Ca=Object(oe.f)(n):n.S=Object(oe.g)(n),u(n),j(Object(oe.b)(n)),v(Object(oe.h)(n))},_=function(e,t,n){if(n){var r=Object(oe.e)(o,Object(N.a)({},e,Object(N.a)({},t,n)));r=Object(oe.d)(r,O),u(r),j(Object(oe.b)(r)),v(Object(oe.h)(r))}else v(Object(a.a)({},b,Object(N.a)({},e,Object(a.a)({},b[e],Object(N.a)({},t,n)))))};return Object(r.useEffect)((function(){x(pe.stringifyProfile(o))}),[o]),l.a.createElement(c.d,{flexDirection:"column"},l.a.createElement(c.d,null,B.c.map((function(e){return l.a.createElement(he,{name:e,label:e,value:o[e],onChange:function(t){return C(e,t)},step:.1})})),l.a.createElement(he,{name:"EC",label:"EC",value:O,onChange:function(e){var t=Object(oe.d)(o,e);u(t),j(Object(oe.b)(t)),v(Object(oe.h)(t))}})),l.a.createElement(c.d,{justifyContent:"space-around"},l.a.createElement(xe,{name:"\u0394\u03a3 I",value:m.ion_balance}),l.a.createElement(xe,{name:"EC",value:m.EC}),l.a.createElement(he,{name:"NH4:NO3",label:"%NH4",value:Object(ne.e)(100*b.NH4.NO3,1),step:.1,onChange:function(e){return _("NH4","NO3",e/100)}}),l.a.createElement(xe,{name:"K:N",value:m.ratio.Ca.N}),l.a.createElement(xe,{name:"K:Ca",value:m.ratio.K.Ca}),l.a.createElement(xe,{name:"K:Mg",value:m.ratio.K.Mg})),l.a.createElement(c.d,null,l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null),Ee.map((function(e){return l.a.createElement("th",null,e)})))),l.a.createElement("tbody",null,Ee.map((function(e){return l.a.createElement("tr",null,l.a.createElement("th",null,e),Ee.map((function(t){var n;return l.a.createElement("td",{style:{textAlign:"center"}},e===t?1:l.a.createElement(he,{name:"".concat(t,":").concat(e),value:Object(ne.e)((null===b||void 0===b||null===(n=b[t])||void 0===n?void 0:n[e])||0,2),onChange:function(n){return _(t,e,n)}}))})))}))))),l.a.createElement(c.d,{justifyContent:"space-around"},B.d.map((function(e){return l.a.createElement(he,{name:e,label:e,value:1e3*(o[e]||0),onChange:function(t){return C(e,t/1e3)},step:1})}))),l.a.createElement(c.d,{marginY:2},l.a.createElement(w.b,{value:y,onChange:function(e){return x(e.target.value)},onBlur:function(e){return function(e){var t=pe.parseProfileString(e);Object(ne.b)(t).length?(x(e),u(t)):x(pe.stringifyProfile(o))}(e.target.value)}})),l.a.createElement(c.d,{justifyContent:"space-between"},l.a.createElement(c.b,{type:"button",onClick:e.modal.close},"Cancel"),l.a.createElement(c.b,{type:"button",onClick:function(){e.onSave(o),e.modal.close()}},"Save")))}function he(e){var t=e.name,n=e.label,a=e.onChange,r=e.value,i=void 0===r?0:r,o=e.step,u=void 0===o?.01:o;return l.a.createElement(c.d,{flexDirection:"column",justifyContent:"center",alignItems:"center",maxWidth:"6rem"},n?l.a.createElement(c.a,{style:{textAlign:"center"}},n):null,l.a.createElement(ie,{onChange:function(e){if(e.target.value){var t=Object(k.a)(e.target.value);a&&a(t)}},name:t,value:i,type:"number",step:u.toString(),min:"0",max:"9999",autoComplete:"off",maxWidth:"6rem",lang:"en-US",style:{textAlign:"center",backgroundColor:Oe.includes(t)?"#b3f7b8":void 0,color:je.includes(t)?"red":void 0,borderColor:"black"}}))}var ye=n(63),xe=function(e){return l.a.createElement(c.d,{flexDirection:"column",m:1,alignItems:"center"},l.a.createElement(c.e,{fontSize:1},e.name),l.a.createElement(c.f,null,e.value))},we=function(){var e=Object(m.d)((function(e){return e.calculator})).recipes,t=void 0===e?[]:e,n=Object(Z.b)(Object(Z.a)()),i=Object(s.a)(n,2),o=i[0],u=i[1],f=Object(r.useState)(null===t||void 0===t?void 0:t[0]),d=Object(s.a)(f,2),v=d[0],E=d[1],O=Object(m.c)(),j=Object(W.f)(o.recipe||Object(W.d)()),g=function(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var a=Object(s.a)(n[t],2),r=a[0],l=a[1];u(Q(r),l)}};return l.a.createElement(c.c,null,l.a.createElement(c.d,{flexDirection:"column"},l.a.createElement(c.d,null,l.a.createElement(c.a,{flex:1,mx:2},l.a.createElement(b.a,{value:v,items:t,onChange:function(e){e&&E(e),e&&g(Object(a.a)({},ye.a,{},e.elements))},onEdit:function(e){var t=Object.fromEntries(B.b.map((function(e){return[e,(null===v||void 0===v?void 0:v.elements[e])||0]})));E({name:e,elements:t})},renderItem:function(e){var t=e.item;return l.a.createElement(c.d,{flex:1,justifyContent:"space-between"},l.a.createElement(c.a,{width:3,backgroundColor:t.color||"gray"}),l.a.createElement(c.a,{flex:1,mx:2},t.name),l.a.createElement("button",{onClick:function(e){e.stopPropagation(),function(e){O(Object(ee.k)(e))}(t)}},"-"))},renderValue:function(e){return(null===e||void 0===e?void 0:e.name)||""}})),l.a.createElement(c.a,null,l.a.createElement(p.a,{marginRight:1,component:$,onClick:function(){if(v){var e=Object(a.a)({},v,{elements:o.recipe});O(Object(ee.j)(e))}}}),l.a.createElement(p.a,{component:Y,onClick:function(){var e=Object.fromEntries(B.b.map((function(e){return[e,0]})));g(e)}}))),l.a.createElement(c.d,{justifyContent:"space-between"},B.c.map((function(e){return l.a.createElement(X,{name:e})}))),l.a.createElement(c.d,{justifyContent:"space-around"},l.a.createElement(te.a,{title:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u043f\u0440\u043e\u0444\u0438\u043b\u044f",button:function(e){var t=e.modal;return l.a.createElement(p.a,{marginRight:1,component:G,onClick:t.open})},container:function(e){var t=e.modal;return l.a.createElement(l.a.Fragment,null,l.a.createElement(ge,{modal:t,onSave:g}))}}),l.a.createElement(xe,{name:"\u0394\u03a3 I",value:j.ion_balance}),l.a.createElement(xe,{name:"EC",value:j.EC}),l.a.createElement(xe,{name:"%NH4",value:Object(ne.e)(100*j.ratio.NH4.NO3,1)}),l.a.createElement(xe,{name:"K:N",value:j.ratio.K.N}),l.a.createElement(xe,{name:"K:Ca",value:j.ratio.K.Ca}),l.a.createElement(xe,{name:"K:Mg",value:j.ratio.K.Mg}))))};function Ce(e){var t=e.fertilizers,n=Object(m.d)(Object(D.a)(V.m)).accuracy;return l.a.createElement(l.a.Fragment,null,t.map((function(e){return l.a.createElement("li",{key:e.id},Object(ne.e)(e.weight,Object(ne.a)(n)),"\u0433 \xa0",l.a.createElement("span",{title:"\u041e\u0431\u044a\u0435\u043c \u0438\u043b\u0438 \u0432\u0435\u0441 \u0440\u0430\u0441\u0442\u0432\u043e\u0440\u0430"},e.volume&&"(".concat(e.volume," \u043c\u043b").concat(e.liquid_weight?", ".concat(e.liquid_weight,"\u0433"):"",")")),"\xa0",e.id)})))}function _e(){var e=Object(m.d)((function(e){return e.calculator})),t=e.fertilizers,n=e.result,r=((null===n||void 0===n?void 0:n.fertilizers)||[]).map((function(e){return Object(a.a)({},e)})),l=Object(ne.g)(r,"id");return Object(ne.b)(Object(R.b)(t)).sort((function(e,t){return Object(s.a)(e,1)[0]>Object(s.a)(t,1)[0]?1:-1})).map((function(e){var t=Object(s.a)(e,2);return[t[0],t[1].map((function(e){return l[e.id]})).filter((function(e){return e}))]}))}function ze(e){var t=Object(m.d)(Object(D.a)(V.m)),n=t.dilution_enabled,r=t.solution_concentration,i=void 0===r?Object(R.c)(1):r,o=t.solution_volume,u=void 0===o?1:o,f=t.dilution_concentration,d=void 0===f?Object(R.c)(1):f,b=_e(),v=function(){var e=Object(m.d)((function(e){return e.calculator})).result,t=Object(m.d)(Object(D.a)(V.m)).solution_volume,n=((null===e||void 0===e?void 0:e.fertilizers)||[]).map((function(e){return Object(a.a)({},e)}));return Object(W.a)(n,t)}();if(!n)return null;var p=Object(R.c)(d),E=Object(ne.e)(p.k*v/i.k),O=null;return O=Object(R.a)({id:"Total",volume:u,concentration:i},b.map((function(e){return{id:Object(s.a)(e,1)[0],concentration:p}}))),l.a.createElement(l.a.Fragment,null,l.a.createElement(c.d,{flexDirection:"column",width:"75%"},l.a.createElement(c.e,{fontSize:2},"\u0420\u0430\u0437\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435"),l.a.createElement("ul",null,O.map((function(e){return l.a.createElement("li",null,"\u0420\u0430\u0441\u0442\u0432\u043e\u0440 ",e.id," - ",e.volume<1?"".concat(1e3*e.volume,"\u043c\u043b"):"".concat(e.volume,"\u043b"))})),l.a.createElement("li",null,"\u0414\u043e\u043b\u0438\u0442\u044c \u0434\u043e ",u,"\u043b"),l.a.createElement("li",null,l.a.createElement("b",null,"TDS:")," ",E," ppm; ",l.a.createElement("b",null,"EC:")," ",Object(W.g)(E,1)," \u043c\u0421\u043c/\u0441\u043c"))))}var ke=n(276),Se=r.forwardRef((function(e,t){return r.createElement(J.a,q()({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 448 512"},e,{ref:t}),r.createElement("path",{fill:"currentColor",d:"M433.941 129.941l-83.882-83.882A48 48 0 00316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 00-14.059-33.941zM272 80v80H144V80h128zm122 352H54a6 6 0 01-6-6V86a6 6 0 016-6h42v104c0 13.255 10.745 24 24 24h176c13.255 0 24-10.745 24-24V83.882l78.243 78.243a6 6 0 011.757 4.243V426a6 6 0 01-6 6zM224 232c-48.523 0-88 39.477-88 88s39.477 88 88 88 88-39.477 88-88-39.477-88-88-88zm0 128c-22.056 0-40-17.944-40-40s17.944-40 40-40 40 17.944 40 40-17.944 40-40 40z"}))}));Se.displayName="Save";var Ie=n(62),Ne=Object(u.a)({form:"mixerOptions",enableReinitialize:!0})((function(e){return l.a.createElement(o.a,null,l.a.createElement(c.d,{flexDirection:"column"},l.a.createElement(A.a,{name:"url",title:"URL",label:"URL"})))})),Ae=function(){var e=Object(m.d)(Object(D.a)(V.m)),t=e.fertilizers,n=e.mixerOptions,r=Object(m.d)((function(e){return e.calculator})).result,i=Object(a.a)({},n,{fertilizers:t}),o=Object(Z.b)("mixerOptions"),u=Object(s.a)(o,1)[0];return l.a.createElement(te.a,{button:function(e){var t=e.modal;return l.a.createElement(p.a,{padding:1,alignSelf:"center",component:Se,backgroundColor:"primary",onClick:t.open},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u043c\u0438\u043a\u0441\u0435\u0440")},container:function(e){var t=e.modal;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Ne,{initialValues:i}),l.a.createElement(c.d,{justifyContent:"flex-end"},l.a.createElement(c.b,{type:"button",onClick:function(){return function(e){var t=Object.fromEntries(((null===r||void 0===r?void 0:r.fertilizers)||[]).map((function(e){return[e.id,e]}))),n=u.fertilizers.filter((function(e){var n;return e.pump_number&&(null===t||void 0===t||null===(n=t[e.id])||void 0===n?void 0:n.liquid_weight)})).map((function(e){var n;return"p".concat(e.pump_number,"=").concat(null===t||void 0===t||null===(n=t[e.id])||void 0===n?void 0:n.liquid_weight)})).join("&");window.open("http://".concat(u.url,"?").concat(n),"_blank"),e.close()}(t)}},"\u041f\u0440\u0438\u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c")))}})};function De(){var e=Object(T.a)(["\n  @media screen and (min-width: 800px) {\n    width: 75%;\n  }\n"]);return De=function(){return e},e}var Fe=L.b.ul(De()),Ve=function(){var e,t,n=Object(m.d)((function(e){return e.calculator})),a=n.fertilizers,r=n.result,i=Object(m.d)(Object(D.a)(V.m)).solution_volume,o=_e(),u=(null===r||void 0===r?void 0:r.elements)||Object(W.d)(),f=(null===r||void 0===r?void 0:r.deltaElements)||Object(W.d)(),b=Object(W.f)(u),v=Object(ne.e)(Object(ne.f)(((null===r||void 0===r?void 0:r.fertilizers)||[]).map((function(e){return e.weight||0}))),2),E=Object(Z.b)(Ie.a),O=Object(s.a)(E,1)[0],j=Object(m.c)(),g=Object(be.b)("",{fertilizers:a,fertilizer_weights:(null===r||void 0===r?void 0:r.fertilizers)||[],volume:i});return l.a.createElement(c.c,null,l.a.createElement(c.d,{alignItems:"center",flexDirection:"column",width:"100%"},l.a.createElement(c.e,{fontSize:2},"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u0440\u0430\u0441\u0447\u0435\u0442\u0430"),l.a.createElement(c.d,{justifyContent:"space-around",width:"100%"},u&&B.c.map((function(e){return l.a.createElement(d.a,{key:e,name:e,value:Object(ne.e)(u[e]),delta:Object(ne.e)(f[e])})}))),l.a.createElement(c.d,{justifyContent:"space-around",width:"100%"},u&&B.d.map((function(e){return l.a.createElement(d.a,{key:e,name:e,value:Object(ne.e)(1e3*u[e]),delta:Object(ne.e)(1e3*f[e])})}))),l.a.createElement(c.d,{justifyContent:"space-around"},l.a.createElement(xe,{name:"\u0394\u03a3 I",value:b.ion_balance}),l.a.createElement(xe,{name:"EC",value:b.EC}),l.a.createElement(xe,{name:"%NH4",value:Object(ne.e)(100*((null===(e=b.ratio)||void 0===e||null===(t=e.NH4)||void 0===t?void 0:t.NO3)||0),1)}),l.a.createElement(xe,{name:"K:N",value:b.ratio.K.N}),l.a.createElement(xe,{name:"K:Ca",value:b.ratio.K.Ca}),l.a.createElement(xe,{name:"K:Mg",value:b.ratio.K.Mg})),l.a.createElement(Fe,null,l.a.createElement("li",null,"\u0414\u043b\u044f ",i,"\u043b \u0440\u0430\u0441\u0442\u0432\u043e\u0440\u0430"),o.map((function(e){var t=Object(s.a)(e,2),n=t[0],a=t[1];return l.a.createElement("li",null,l.a.createElement("b",null,"\u0420\u0430\u0441\u0442\u0432\u043e\u0440 ",n),l.a.createElement("ul",null,l.a.createElement(Ce,{fertilizers:a})))})),l.a.createElement("li",null,"\u0412\u0441\u0435\u0433\u043e \u0441\u043e\u043b\u0435\u0439: ",v," \u0433."),l.a.createElement("li",null,"\u041a\u043e\u043d\u0446\u0435\u043d\u0442\u0440\u0430\u0446\u0438\u044f \u0441\u043e\u043b\u0435\u0439: ",Object(ne.e)(v/i,2)," \u0433/\u043b")),l.a.createElement(ze,null),(null===r||void 0===r?void 0:r.stats)&&l.a.createElement(c.f,null,"\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043e \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u043e\u0432: ",null===r||void 0===r?void 0:r.stats.count," \u0412\u0440\u0435\u043c\u044f: ",null===r||void 0===r?void 0:r.stats.time," \u0441\u0435\u043a"),l.a.createElement(c.d,null,(null===r||void 0===r?void 0:r.fertilizers)?l.a.createElement(c.d,null,l.a.createElement(te.a,{button:function(e){var t=e.modal;return l.a.createElement(p.a,{padding:1,alignSelf:"center",component:Se,backgroundColor:"primary",onClick:t.open},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0441")},container:function(e){var t=e.modal;return l.a.createElement(l.a.Fragment,null,l.a.createElement(ke.a,{initialValues:Object(ke.c)(g)}),l.a.createElement(c.d,{justifyContent:"flex-end"},l.a.createElement(c.b,{type:"button",onClick:function(){return function(e){j(Object(ee.d)(Object(ke.b)(O))),e.close()}(t)}},"Save")))}})):null,l.a.createElement(c.d,null,l.a.createElement(Ae,null)))))},Re=n(17),He=n(296),Me=n(266),Ke=n(275);function Pe(e){var t=Object(m.d)((function(e){return e.calculator})).recipes;return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{onClick:function(){var e=t.map((function(e){var t=B.b.map((function(t){return e.elements[t]}));return[e.name].concat(Object(Re.a)(t))})),n=Object(Me.a)(e,{columns:["\u041f\u0440\u043e\u0444\u0438\u043b\u044c"].concat(Object(Re.a)(B.b)),header:!0});Object(Ke.a)(n,"\u041f\u0440\u043e\u0444\u0438\u043b\u0438.csv")},component:He.a}))}var Te=n(297),Be=["id"].concat(Object(Re.a)(B.b));function Le(e){var t=Object(r.createRef)(),n=Object(m.c)(),c=Object(r.useState)({width:0,height:0}),i=Object(s.a)(c,2),o=i[0],u=i[1];Object(r.useEffect)((function(){var e,n,a={width:(null===(e=t.current)||void 0===e?void 0:e.offsetWidth)||0,height:(null===(n=t.current)||void 0===n?void 0:n.offsetHeight)||0};o.width!==a.width&&u(a)}),[t,o.width]);var d=function(e){var t,a;console.log(e.target.value,null===(t=e.target.files)||void 0===t?void 0:t[0]);var r=null===(a=e.target.files)||void 0===a?void 0:a[0];if(!r)return r;var l=new FileReader;l.onload=function(){console.log(l.result),function(e){var t=Object(Me.b)(e,{columns:Be});isNaN(parseInt(t[0].P))&&t.splice(0,1);var a,r=Object(f.a)(t);try{for(r.s();!(a=r.n()).done;){var l=a.value,c=l.id,i=Object(x.a)(l,["id"]);n(Object(ee.j)({name:c,elements:i}))}}catch(o){r.e(o)}finally{r.f()}}(l.result)},l.readAsText(r)};return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{sx:{position:"relative"},ref:t,component:Te.a},l.a.createElement("input",{type:"file",accept:"text/csv, .csv",onChange:function(e){return d(e)},style:Object(a.a)({top:0,left:0,position:"absolute",opacity:0},o)})))}function We(e){return{"@media screen and (max-width: 800px)":e}}function Ue(e){var t=Object(m.d)((function(e){return e.calculator})),n=t.calculationForm,a=t.result,r=t.fertilizers,c=t.recipes;return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{onClick:function(){var e=(new Date).toISOString(),t={meta:{version:"0.2.1",ref:"20312af",created:e},calculator:{calculationForm:n,result:a,fertilizers:r,recipes:c}},l=JSON.stringify(t,null,4);Object(Ke.a)(l,"CalculatorSettings-".concat(e,".json"))},component:He.a,title:"\u042d\u043a\u0441\u043f\u043e\u0440\u0442 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a"}))}var qe=function(e){Object(de.a)(n,e);var t=Object(fe.a)(n);function n(){return Object(ue.a)(this,n),t.apply(this,arguments)}return Object(me.a)(n,[{key:"export",value:function(e){return JSON.stringify(e)}},{key:"import",value:function(e){return JSON.parse(e)}}]),n}(se);qe.ext=".json";var Je=[qe,pe],Ye=Object.fromEntries(Je.map((function(e){return[e.ext,e]}))),$e=Je.map((function(e){return e.ext})).join(", ");function Ge(e){var t=Object(r.createRef)(),n=Object(m.c)(),c=Object(r.useState)({width:0,height:0}),i=Object(s.a)(c,2),o=i[0],u=i[1];Object(r.useEffect)((function(){var e,n,a={width:(null===(e=t.current)||void 0===e?void 0:e.offsetWidth)||0,height:(null===(n=t.current)||void 0===n?void 0:n.offsetHeight)||0};o.width!==a.width&&u(a)}),[t,o.width]);var f=function(e){var t,a;console.log(e.target.value,null===(t=e.target.files)||void 0===t?void 0:t[0]);var r=null===(a=e.target.files)||void 0===a?void 0:a[0];if(!r)return r;var l=new FileReader;l.onload=function(){console.log(l.result),function(e,t){var a="."+e.name.split(".").pop();if(Ye[a]){var r=(new Ye[a]).import(t);n(Object(ee.h)(r))}}(r,l.result)},l.readAsText(r)};return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{sx:{position:"relative"},ref:t,component:Te.a},l.a.createElement("input",{type:"file",accept:$e,onChange:function(e){return f(e)},style:Object(a.a)({top:0,left:0,position:"absolute",opacity:0},o),title:"\u0418\u043c\u043f\u043e\u0440\u0442 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a"})))}var Qe={accuracy:.2,solution_volume:1,solution_concentration:Object(R.c)(100),recipe:Object(a.a)({},ye.b[0].elements,{},ye.a,{Cl:0}),fertilizers:[],dilution_enabled:!1,dilution_concentration:Object(R.c)(1),topping_up_enabled:!1,mixerOptions:{}},Xe=function(e){var t=e.handleSubmit,n=Object(m.c)();return l.a.createElement(o.a,{onSubmit:t((function(){n(Object(ee.b)())}))},l.a.createElement(c.d,{sx:Object(a.a)({flexDirection:"row"},We({flexDirection:"column-reverse"}))},l.a.createElement(c.a,{flex:1,sx:Object(a.a)({marginRight:2},We({marginRight:0}))},l.a.createElement(g,null)),l.a.createElement(c.d,{flexDirection:"column",flex:1},l.a.createElement(c.a,{flex:1,marginBottom:2},l.a.createElement(we,null)),l.a.createElement(c.a,{flex:1},l.a.createElement(Ve,null)),l.a.createElement(c.a,{flex:1},l.a.createElement(P,null)),l.a.createElement(c.c,null,l.a.createElement(c.e,{fontSize:2},"\u0418\u043c\u043f\u043e\u0440\u0442/\u042d\u043a\u0441\u043f\u043e\u0440\u0442"),l.a.createElement(c.d,{flexDirection:"column",p:3},l.a.createElement(c.d,{alignItems:"center",justifyContent:"space-between",flexWrap:"wrap"},l.a.createElement(c.f,null,"\u0420\u0435\u0446\u0435\u043f\u0442\u044b"),l.a.createElement(c.a,{sx:{"&>*":{marginLeft:1}}},l.a.createElement(Le,null),l.a.createElement(Pe,null),l.a.createElement(p.a,{component:i.a,onClick:function(){return n(Object(ee.l)())}}))),l.a.createElement(c.d,{alignItems:"center",justifyContent:"space-between",flexWrap:"wrap"},l.a.createElement(c.f,null,"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),l.a.createElement(c.a,{sx:{"&>*":{marginLeft:1}}},l.a.createElement(Ge,null),l.a.createElement(Ue,null))))))))},Ze=Object(u.a)({form:V.m,initialValues:Qe,enableReinitialize:!0})(Xe),et=Object(m.b)((function(e){var t,n=(null===(t=e.calculator)||void 0===t?void 0:t.calculationForm)||Qe;return{initialValues:Object(a.a)({},n,{recipe:Object(a.a)({Cl:0},ye.a,{},n.recipe)})}}))(Ze);t.default=et}}]);
//# sourceMappingURL=5.8476f683.chunk.js.map