(this["webpackJsonpfertilizer-calculator"]=this["webpackJsonpfertilizer-calculator"]||[]).push([[6],{246:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(5),r=n(87),c=n(0),l=n.n(c),i=n(17),o=n(93),u=Object(c.forwardRef)((function(e,t){var n,u=e.component,m=e.size,f=void 0===m?"1.5em":m,d=e.children,s=Object(r.a)(e,["component","size","children"]),b=Object(c.useState)(f||0),v=Object(a.a)(b,2),E=v[0],p=v[1],j=Object(o.a)();return Object(c.useEffect)((function(){var e;!f&&t&&"current"in t&&p((null===(e=t.current)||void 0===e?void 0:e.offsetWidth)||0)}),[t,p,f]),l.a.createElement(i.b,Object.assign({type:"button"},s,{ref:t}),l.a.createElement(u,{color:null===(n=j.colors)||void 0===n?void 0:n.background,size:E}),d)}))},248:function(e,t,n){"use strict";function a(e){return e&&parseInt(e)}function r(e){return e&&parseFloat(e)}n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r}))},250:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return s}));var a=n(87),r=n(59),c=n(0),l=n.n(c),i=n(145),o=n(244),u=n(62);function m(){var e=Object(r.a)(["\n  ::-webkit-inner-spin-button, ::-webkit-outer-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n  }\n  -moz-appearance: textfield;\n\n"]);return m=function(){return e},e}var f=Object(u.b)(o.b)(m()),d=function(e){var t=e.input,n=e.label,r=e.type,c=void 0===r?"text":r,i=Object(a.a)(e,["input","label","type"]);return l.a.createElement(f,Object.assign({},i,t,{type:c,lang:"en-US",placeholder:n}))},s=function(e){var t=e.name,n=Object(a.a)(e,["name"]);return l.a.createElement(i.a,Object.assign({component:d,name:t},n))}},254:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return u}));var a=n(0),r=n(86),c=n(121),l=n(107),i=n(43);function o(){return Object(a.useContext)(c.a).form}function u(e){var t=Object(r.c)();return[Object(r.d)((function(t){return Object(l.a)(e)(t)})),function(n,a){t(Object(i.a)(e,n,a))}]}},258:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return d}));var a=n(0),r=n.n(a),c=n(17),l=n(90),i=n(44),o=n(20),u=n(246),m=n(2),f=function(e){var t=e.name,n=e.value,a=e.delta;return r.a.createElement(c.a,{bg:t,flex:1,mx:"2px",px:1,color:"black",minWidth:"2.1em",maxWidth:"3em",fontSize:1},r.a.createElement(c.d,{flexDirection:"column",alignItems:"center"},r.a.createElement(c.a,null,t),r.a.createElement(c.a,null,Object(m.e)(n,1)),"undefined"!==typeof a?r.a.createElement(c.a,null,a):null))},d=function(e){var t=e.item,n=e.onRemove,a=e.weight,m=Object(i.b)(t,!1);return r.a.createElement(c.c,{width:"auto"},r.a.createElement(c.d,{justifyContent:"space-between",alignItems:"center"},r.a.createElement(c.a,{flex:1},r.a.createElement(c.f,{flex:1},t.id),r.a.createElement(c.d,null,o.b.map((function(e){var t=m.elements[e];return t?r.a.createElement(f,{name:e,key:e,value:t}):null})))),r.a.createElement(c.d,null,r.a.createElement(c.d,{alignItems:"center",justifyContent:"center",margin:1},a?r.a.createElement(c.f,{textAlign:"center",minWidth:"3em"},a.weight,"\u0433",a.volume?r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("span",{title:"\u041e\u0431\u044a\u0435\u043c \u0438\u043b\u0438 \u0432\u0435\u0441 \u0440\u0430\u0441\u0442\u0432\u043e\u0440\u0430"},a.volume&&"".concat(a.volume," \u043c\u043b").concat(a.liquid_weight?", ".concat(a.liquid_weight,"\u0433"):""))):null):null),r.a.createElement(u.a,{padding:1,alignSelf:"center",component:l.a,onClick:function(){return n()}}))))}},262:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(87),r=n(0),c=n.n(r),l=n(244),i=n(145),o=function(e){var t=e.input,n=e.label,r=Object(a.a)(e,["input","label"]);return c.a.createElement(l.c,null,c.a.createElement(l.a,Object.assign({},r,t,{checked:t.value})),n)},u=function(e){var t=e.name,n=Object(a.a)(e,["name"]);return c.a.createElement(i.a,Object.assign({component:o,name:t},n))}},264:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var a=n(5),r=n(59),c=n(0),l=n.n(c),i=n(244),o=n(17),u=n(42),m=n(287),f=l.a.createContext({}),d=n(62);function s(){var e=Object(r.a)(["\n      pointer-events: none;\n      opacity: 0.4;\n  "]);return s=function(){return e},e}function b(){var e=Object(r.a)(["\n  ","\n\n"]);return b=function(){return e},e}var v=function(e){var t=e.children;return l.a.createElement(o.d,{padding:2,sx:{position:"relative",zIndex:1,"&::before":{backgroundColor:"highlight",content:'""',position:"absolute",left:0,top:0,opacity:0,width:"100%",height:"100%",zIndex:-1},"&:hover::before":{opacity:.1}}},t)},E=Object(d.b)(o.a)(b(),(function(e){return e.disabled&&Object(d.a)(s())}));function p(e){var t=e.value,n=e.index,a=Object(c.useContext)(f);return l.a.createElement(E,{onClick:function(){a.onItemClick&&a.onItemClick(t)},disabled:a.checkDisabledItem&&a.checkDisabledItem(t)},l.a.createElement(v,null,a.renderItem?l.a.createElement(a.renderItem,{item:t,index:n}):t+""))}function j(e){var t=e.items,n=Object(c.useRef)(),r=Object(c.useState)(0),i=Object(a.a)(r,2),u=i[0],m=i[1];return Object(c.useEffect)((function(){var e;m((null===n||void 0===n||null===(e=n.current)||void 0===e?void 0:e.offsetHeight)||0)}),[n]),l.a.createElement(o.c,{backgroundColor:"background",padding:0,maxHeight:5*u,overflowY:"auto",sx:{zIndex:3}},l.a.createElement(o.d,{flexDirection:"column"},Array.from(t).map((function(e,a){return l.a.createElement(o.a,{ref:0===a?n:null},l.a.createElement(p,{value:e,index:a,key:a}),a<t.length-1?l.a.createElement("hr",{style:{margin:0}}):null)}))))}function O(){var e=Object(r.a)(["\n  color: ",";\n  height: 3rem;\n  opacity: 0.5;\n  \n  &:hover {\n    opacity: 0.7;\n  }\n"]);return O=function(){return e},e}var g=Object(u.default)(m.a)(O(),(function(e){return e.theme.colors.text}));function h(e){var t=e.width,n=function(t){return e.renderValue?e.renderValue(t):(t||"")+""},r=Object(c.useState)(!1),u=Object(a.a)(r,2),m=u[0],d=u[1],s=Object(c.useState)(e.value||null),b=Object(a.a)(s,2),v=b[0],E=b[1],p=Object(c.useState)(n(e.value||null)),O=Object(a.a)(p,2),h=O[0],x=O[1],C=Object(c.useState)(!1),y=Object(a.a)(C,2),w=y[0],k=y[1],z=Object(c.useRef)();Object(c.useEffect)((function(){function e(e){z.current&&!z.current.contains(e.target)&&d(!1)}return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[z]);var S=function(t){E(t),x(n(t)),e.onChange&&e.onChange(t),k(!1),d(!1)},I={onItemClick:S,renderItem:e.renderItem,checkDisabledItem:e.checkDisabledItem};return l.a.createElement(f.Provider,{value:I},l.a.createElement(o.d,{flexDirection:"column",width:t,ref:z},l.a.createElement(o.d,{sx:{position:"relative"}},l.a.createElement(i.b,{value:h,onChange:function(e){var t=e.target.value;x(t),k(!0),d(!1)},onKeyDown:function(t){t.stopPropagation(),"Enter"===t.key&&e.onEdit&&e.onEdit(h),"Escape"===t.key&&S(v)},onBlur:function(){w&&h&&e.onEdit&&e.onEdit(h)}}),l.a.createElement(o.a,{sx:{position:"absolute",right:0}},l.a.createElement(g,{onClick:function(){return d(!m)}}))),l.a.createElement(o.d,{sx:{position:"relative"}},l.a.createElement(o.d,{sx:{position:"absolute"},flexDirection:"column",width:"100%"},m&&l.a.createElement(j,{items:e.items})))))}},265:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n(5),r=n(0),c=n.n(r),l=n(59),i=n(46),o=n.n(i),u=n(17),m=n(42),f=n(94);function d(){var e=Object(l.a)(["\n  overflow-y: auto;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: ",";\n  left: 0;\n  justify-content: center;\n  align-items: center;\n  background-color: rgba(255, 255, 255, 0.5);\n  z-index: 999;\n  \n  // Mobile\n  @media screen and (max-height: 500px), screen and (max-width: 500px) {\n    align-items: initial;\n  }\n"]);return d=function(){return e},e}var s=Object(m.default)(u.d)(d(),(function(){return"".concat(window.pageYOffset,"px")}));function b(e){var t=e.children,n=function(){var e=document.querySelector("#modal-root");return e||((e=document.createElement("div")).setAttribute("id","modal-root"),document.body.appendChild(e)),e}();return o.a.createPortal(c.a.createElement(c.a.Fragment,null,c.a.createElement(f.a,null,c.a.createElement("style",{type:"text/css"},"\n          body {\n            overflow: hidden;\n          }\n        ")),c.a.createElement(s,null,c.a.createElement(u.c,{backgroundColor:"#fff",height:"max-content"},t))),n)}var v=n(78),E=n(90);function p(e){var t=e.opened,n=void 0!==t&&t,l=e.button,i=e.container,o=Object(r.useState)(!n),m=Object(a.a)(o,2),f=m[0],d=m[1];Object(r.useEffect)((function(){d(!n)}),[n]),Object(r.useEffect)((function(){f&&e.onClose&&e.onClose()}),[f,e]);var s={open:function(){return d(!1)},close:function(){return d(!0)}},p={modal:s};return c.a.createElement(c.a.Fragment,null,l&&l(p),f?null:c.a.createElement(b,null,c.a.createElement(u.d,{justifyContent:"space-between"},c.a.createElement(u.e,{fontSize:2},e.title),c.a.createElement(v.a,{component:E.a,onClick:s.close})),c.a.createElement(u.a,null,i(p))))}},440:function(e,t){},442:function(e,t){},484:function(e,t,n){"use strict";n.r(t),n.d(t,"CalculatorContainer",(function(){return De}));var a=n(13),r=n(0),c=n.n(r),l=n(17),i=n(453),o=n(143),u=n(144),m=n(86),f=n(10),d=n(258),s=n(5),b=n(264),v=n(295),E=n(246),p=function(e){var t=e.onAdd,n=Object(m.d)((function(e){return e.calculator})).fertilizers,a=Object(m.d)((function(e){return e.calculator})).calculationForm,i=Object(r.useState)(n[0]),o=Object(s.a)(i,2),u=o[0],f=o[1],d=((null===a||void 0===a?void 0:a.fertilizers)||[]).map((function(e){return null===e||void 0===e?void 0:e.id}));return c.a.createElement(l.c,null,c.a.createElement(l.d,{flexDirection:"column"},c.a.createElement(l.d,{justifyContent:"space-between"},c.a.createElement(l.a,{flex:1,pr:2},c.a.createElement(b.a,{value:u,items:n,onChange:function(e){e&&f(e)},checkDisabledItem:function(e){return d.includes((null===e||void 0===e?void 0:e.id)||"")},renderItem:function(e){var n=e.item;return c.a.createElement(l.d,{flex:1,justifyContent:"space-between"},c.a.createElement(l.a,null,n.id),c.a.createElement(E.a,{onClick:function(e){e.stopPropagation(),function(e){t(e)}(n)},component:v.a}))},renderValue:function(e){return(null===e||void 0===e?void 0:e.id)||""}})))))},j=function(e){var t=e.fields,n=e.meta.error,a=Object(m.d)((function(e){return e.calculator})),r=a.calculationForm,i=a.result,o=(null===r||void 0===r?void 0:r.fertilizers)||[],u=Object.fromEntries(((null===i||void 0===i?void 0:i.fertilizers)||[]).map((function(e){return[e.id,e]})));return c.a.createElement(l.d,{sx:{flexDirection:"column"},width:"auto"},c.a.createElement(p,{onAdd:function(e){var n,a=Object(f.a)(o);try{for(a.s();!(n=a.n()).done;){if(n.value.id===e.id)return}}catch(r){a.e(r)}finally{a.f()}t.push(e)}}),c.a.createElement(l.d,{sx:{flexDirection:"column","& > *":{marginTop:"8px !important"}}},n?c.a.createElement("span",null,n):null,o.map((function(e,n){return c.a.createElement(d.b,{item:e,key:e.id,weight:u[e.id],onRemove:function(){return t.remove(n)}})}))))},O=n(146);var g=function(){return c.a.createElement(O.a,{name:"fertilizers",component:j,validate:(e="\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0443\u0434\u043e\u0431\u0440\u0435\u043d\u0438\u044f",e=e||"\u0414\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e",function(t){if(!t||!(null===t||void 0===t?void 0:t.length))return e})});var e},h=n(262),x=function(){return c.a.createElement(l.c,null,c.a.createElement(l.d,{flexDirection:"column"},c.a.createElement(l.e,{fontSize:2},"\u0418\u0433\u043d\u043e\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c"),c.a.createElement(h.a,{name:"ignore.Ca",label:"\u041a\u0430\u043b\u044c\u0446\u0438\u0439"}),c.a.createElement(h.a,{name:"ignore.Mg",label:"\u041c\u0430\u0433\u043d\u0438\u0439"}),c.a.createElement(h.a,{name:"ignore.S",label:"\u0421\u0435\u0440\u0430"}),c.a.createElement(h.a,{name:"ignore.Cl",label:"\u0425\u043b\u043e\u0440"})))},C=n(87),y=n(244),w=n(145),k=function(e){var t=e.input,n=e.label,a=(e.value,Object(C.a)(e,["input","label","value"]));return c.a.createElement(y.c,null,c.a.createElement(y.d,Object.assign({},a,t)),n)},z=function(e){var t=e.name,n=e.value,a=e.normalize,r=void 0===a?function(e){return e.toString()}:a,l=Object(C.a)(e,["name","value","normalize"]);return c.a.createElement(w.a,Object.assign({component:k,name:t,normalize:r,type:"radio",value:r(n)},l))},S=n(248),I=[.2,.1,.05,.01],D=function(){return c.a.createElement(l.c,null,c.a.createElement(l.d,{flexDirection:"column"},c.a.createElement(l.e,{fontSize:2},"\u0422\u043e\u0447\u043d\u043e\u0441\u0442\u044c"),I.map((function(e){return c.a.createElement(z,{name:"accuracy",value:e,label:"".concat(e," \u0433."),normalize:S.a})}))))},N=n(250),_=function(){return c.a.createElement(l.c,null,c.a.createElement(l.e,{fontSize:2},"\u0420\u0430\u0441\u0442\u0432\u043e\u0440"),c.a.createElement(l.d,{flexDirection:"column"},c.a.createElement(l.d,{alignItems:"center",justifyContent:"space-between"},c.a.createElement(y.c,{htmlFor:"solution_volume"},"\u041e\u0431\u044a\u0435\u043c, \u043b"),c.a.createElement(N.a,{name:"solution_volume",width:"3rem",type:"number",step:"1",min:"1",pattern:"^\\d+$",normalize:S.b,style:{textAlign:"center"},autoComplete:"off"})),c.a.createElement(l.d,{alignItems:"center",justifyContent:"space-between",paddingTop:2},c.a.createElement(y.c,{htmlFor:"solution_concentration"},"\u041a\u043e\u043d\u0446\u0435\u043d\u0442\u0440\u0430\u0446\u0438\u044f, 1/100%"),c.a.createElement(N.a,{name:"solution_concentration",width:"3rem",type:"number",step:"0.1",min:"0",max:"999",normalize:S.a,style:{textAlign:"center"},autoComplete:"off"}))))},F=n(107),A=n(12),R=function(){var e=Object(m.d)(Object(F.a)(A.k)).dilution_enabled;return c.a.createElement(l.c,null,c.a.createElement(h.a,{name:"dilution_enabled",label:"\u0420\u0430\u0437\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043a\u043e\u043d\u0446\u0435\u043d\u0442\u0440\u0430\u0442\u0430"}),c.a.createElement(l.d,{flexDirection:"column",style:{display:e?"flex":"none"}},c.a.createElement(l.d,{alignItems:"center",justifyContent:"space-between"},c.a.createElement(y.c,{htmlFor:"dilution_volume"},"\u041e\u0431\u044a\u0435\u043c, \u043b"),c.a.createElement(N.a,{name:"dilution_volume",width:"3rem",type:"number",step:"1",min:"1",pattern:"^\\d+$",normalize:S.b,style:{textAlign:"center"},autoComplete:"off"})),c.a.createElement(l.d,{alignItems:"center",justifyContent:"space-between",paddingTop:2},c.a.createElement(y.c,{htmlFor:"dilution_concentration"},"\u041a\u043e\u043d\u0446\u0435\u043d\u0442\u0440\u0430\u0446\u0438\u044f, 1/100%"),c.a.createElement(N.a,{name:"dilution_concentration",width:"3rem",type:"number",step:"0.1",min:"0",max:"999",normalize:S.a,style:{textAlign:"center"},autoComplete:"off"}))))},K=function(){return c.a.createElement(l.d,{flexDirection:"column"},c.a.createElement(l.a,{flex:1},c.a.createElement(l.b,{width:"100%",my:2,type:"submit"},"Calculate")),c.a.createElement(l.a,{my:2},c.a.createElement(_,null)),c.a.createElement(l.a,{my:2},c.a.createElement(R,null)),c.a.createElement(l.d,{sx:{"& > *":{flex:1}}},c.a.createElement(x,null),c.a.createElement(l.a,{marginLeft:2},c.a.createElement(D,null))))},H=n(59),W=n(20),P=n(62),L=n(27),M=n(421),T=n(420),B=n(422),U=function(e){return"recipe.".concat(e)},V=function(e){var t=e.name;return c.a.createElement(l.d,{flexDirection:"column",justifyContent:"center",alignItems:"center",maxWidth:"3rem"},c.a.createElement(l.a,{style:{textAlign:"center"}},t),c.a.createElement(N.a,{name:U(t),type:"number",step:"0.1",min:"0",max:"999",autoComplete:"off",normalize:S.b,maxWidth:"3rem",style:{textAlign:"center"}}))},q=n(254),J=n(63),Y=n(265),$=n(71),G=n(100),Q=n(2),X=G.a.filter((function(e){return!["NH4","NO3"].includes(e)}));function Z(e){var t=Object(q.b)(Object(q.a)())[0],n=Object(r.useState)(t.recipe),i=Object(s.a)(n,2),o=i[0],u=i[1],m=Object(L.a)(o),f=Object(r.useState)(m.ratio),d=Object(s.a)(f,2),b=d[0],v=d[1],E=Object(r.useState)(m.EC),p=Object(s.a)(E,2),j=p[0],O=p[1],g=function(e,t){u(Object(a.a)({},o,Object($.a)({},e,t)))},h=function(e,t,n){if(n){var r=Object(G.c)(o,Object($.a)({},e,Object($.a)({},t,n)));r=Object(G.b)(r,j),u(r)}v(Object(a.a)({},b,Object($.a)({},e,Object(a.a)({},b[e],Object($.a)({},t,n)))))};return c.a.createElement(l.d,{flexDirection:"column"},c.a.createElement(l.d,null,W.d.map((function(e){return c.a.createElement(ee,{name:e,label:e,value:o[e],onChange:function(t){return g(e,t)},step:.1})})),c.a.createElement(ee,{name:"EC",label:"EC",value:j,onChange:function(e){u(Object(G.b)(o,e)),O(e)}})),c.a.createElement(l.d,{justifyContent:"space-around"},c.a.createElement(te,{name:"\u0394\u03a3 I",value:m.ion_balance}),c.a.createElement(te,{name:"EC",value:m.EC}),c.a.createElement(ee,{name:"NH4",label:"%NH4",value:Object(Q.e)(100*b.NH4.NO3,1),step:.1,onChange:function(e){return h("NH4","NO3",e/100)}}),c.a.createElement(te,{name:"K:Mg",value:m.ratio.K.Mg}),c.a.createElement(te,{name:"K:Ca",value:m.ratio.K.Ca}),c.a.createElement(te,{name:"Ca:N",value:m.ratio.Ca.N}),c.a.createElement(te,{name:"N:K",value:m.ratio.N.K}),c.a.createElement(te,{name:"N:P",value:m.ratio.N.P})),c.a.createElement(l.d,null,c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null),X.map((function(e){return c.a.createElement("th",null,e)})))),c.a.createElement("tbody",null,X.map((function(e){return c.a.createElement("tr",null,c.a.createElement("th",null,e),X.map((function(t){var n;return c.a.createElement("td",{style:{textAlign:"center"}},e===t?1:c.a.createElement(ee,{name:"".concat(e,":").concat(t),value:Object(Q.e)((null===b||void 0===b||null===(n=b[e])||void 0===n?void 0:n[t])||0,2),onChange:function(n){return h(e,t,n)}}))})))}))))),c.a.createElement(l.d,{justifyContent:"space-around"},W.e.map((function(e){return c.a.createElement(ee,{name:e,label:e,value:1e3*(o[e]||0),onChange:function(t){return g(e,t/1e3)},step:1})}))),c.a.createElement(l.d,{justifyContent:"space-between"},c.a.createElement(l.b,{type:"button",onClick:e.modal.close},"Cancel"),c.a.createElement(l.b,{type:"button",onClick:function(){e.onSave(o),e.modal.close()}},"Save")))}function ee(e){var t=e.name,n=e.label,a=e.onChange,r=e.value,i=void 0===r?0:r,o=e.step,u=void 0===o?.01:o;return c.a.createElement(l.d,{flexDirection:"column",justifyContent:"center",alignItems:"center",maxWidth:"6rem"},n?c.a.createElement(l.a,{style:{textAlign:"center"}},n):null,c.a.createElement(N.b,{onChange:function(e){if(e.target.value){var t=Object(S.a)(e.target.value);a&&a(t)}},name:t,value:i,type:"number",step:u.toString(),min:"0",max:"9999",autoComplete:"off",maxWidth:"6rem",lang:"en-US",style:{textAlign:"center"}}))}var te=function(e){return c.a.createElement(l.d,{flexDirection:"column",m:1,alignItems:"center"},c.a.createElement(l.e,{fontSize:1},e.name),c.a.createElement(l.f,null,e.value))},ne=function(){var e=Object(m.d)((function(e){return e.calculator})).recipes,t=void 0===e?[]:e,n=Object(q.b)(Object(q.a)()),i=Object(s.a)(n,2),o=i[0],u=i[1],f=Object(r.useState)(null===t||void 0===t?void 0:t[0]),d=Object(s.a)(f,2),v=d[0],p=d[1],j=Object(m.c)(),O=Object(L.a)(o.recipe||Object(L.d)()),g=function(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var a=Object(s.a)(n[t],2),r=a[0],c=a[1];u(U(r),c)}};return c.a.createElement(l.c,null,c.a.createElement(l.d,{flexDirection:"column"},c.a.createElement(l.d,null,c.a.createElement(l.a,{flex:1,mx:2},c.a.createElement(b.a,{value:v,items:t,onChange:function(e){e&&p(e),e&&g(e.elements)},onEdit:function(e){var t=Object.fromEntries(W.b.map((function(e){return[e,(null===v||void 0===v?void 0:v.elements[e])||0]})));p({name:e,elements:t})},renderItem:function(e){var t=e.item;return c.a.createElement(l.d,{flex:1,justifyContent:"space-between"},c.a.createElement(l.a,{width:3,backgroundColor:t.color||"gray"}),c.a.createElement(l.a,{flex:1,mx:2},t.name),c.a.createElement("button",{onClick:function(e){e.stopPropagation(),function(e){j(Object(J.i)(e))}(t)}},"-"))},renderValue:function(e){return(null===e||void 0===e?void 0:e.name)||""}})),c.a.createElement(l.a,null,c.a.createElement(E.a,{marginRight:1,component:T.a,onClick:function(){if(v){var e=Object(a.a)({},v,{elements:o.recipe});j(Object(J.h)(e))}}}),c.a.createElement(E.a,{component:M.a,onClick:function(){var e=Object.fromEntries(W.b.map((function(e){return[e,0]})));g(e)}}))),c.a.createElement(l.d,{justifyContent:"space-between"},W.d.map((function(e){return c.a.createElement(V,{name:e})}))),c.a.createElement(l.d,{justifyContent:"space-around"},c.a.createElement(Y.a,{title:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u043f\u0440\u043e\u0444\u0438\u043b\u044f",button:function(e){var t=e.modal;return c.a.createElement(E.a,{marginRight:1,component:B.a,onClick:t.open})},container:function(e){var t=e.modal;return c.a.createElement(c.a.Fragment,null,c.a.createElement(Z,{modal:t,onSave:g}))}}),c.a.createElement(te,{name:"\u0394\u03a3 I",value:O.ion_balance}),c.a.createElement(te,{name:"EC",value:O.EC}),c.a.createElement(te,{name:"%NH4",value:Object(Q.e)(100*O.ratio.NH4.NO3,1)}),c.a.createElement(te,{name:"K:Mg",value:O.ratio.K.Mg}),c.a.createElement(te,{name:"K:Ca",value:O.ratio.K.Ca}),c.a.createElement(te,{name:"Ca:N",value:O.ratio.Ca.N}))))};function ae(e){var t=e.fertilizers,n=Object(m.d)(Object(F.a)(A.k)).accuracy;return c.a.createElement(c.a.Fragment,null,t.map((function(e){return c.a.createElement("li",{key:e.id},Object(Q.e)(e.weight,Object(Q.a)(n)),"\u0433 \xa0",c.a.createElement("span",{title:"\u041e\u0431\u044a\u0435\u043c \u0438\u043b\u0438 \u0432\u0435\u0441 \u0440\u0430\u0441\u0442\u0432\u043e\u0440\u0430"},e.volume&&"(".concat(e.volume," \u043c\u043b").concat(e.liquid_weight?", ".concat(e.liquid_weight,"\u0433"):"",")")),"\xa0",e.id)})))}var re=n(22),ce=n(44);function le(){var e=Object(m.d)((function(e){return e.calculator})).result,t=Object(m.d)(Object(F.a)(A.k)).solution_volume,n=((null===e||void 0===e?void 0:e.fertilizers)||[]).map((function(e){return Object(a.a)({},e)}));return Object(L.b)(n,t)}function ie(){var e=Object(m.d)((function(e){return e.calculator})),t=e.fertilizers,n=e.result,r=((null===n||void 0===n?void 0:n.fertilizers)||[]).map((function(e){return Object(a.a)({},e)})),c=Object(Q.g)(r,"id");return Object(Q.b)(function(e){var t,n={},a=Object(f.a)(e);try{for(a.s();!(t=a.n()).done;){var r=t.value,c=Object(ce.b)(r);c.elements.NO3?n.A=[].concat(Object(re.a)(n.A||[]),[r]):c.elements.S||c.elements.P?n.B=[].concat(Object(re.a)(n.B||[]),[r]):n.C=[].concat(Object(re.a)(n.C||[]),[r])}}catch(l){a.e(l)}finally{a.f()}return n}(t)).sort((function(e,t){return Object(s.a)(e,1)[0]>Object(s.a)(t,1)[0]?1:-1})).map((function(e){var t=Object(s.a)(e,2);return[t[0],t[1].map((function(e){return c[e.id]})).filter((function(e){return e}))]}))}function oe(e){var t=Object(m.d)(Object(F.a)(A.k)),n=t.solution_concentration,a=t.dilution_enabled,r=t.dilution_volume,i=t.dilution_concentration,o=ie(),u=le();if(!a)return null;u=Object(Q.e)(i*u/n);var d=null;return d=function(e,t){var n,a=[],r=Object(f.a)(t);try{for(r.s();!(n=r.n()).done;){var c=n.value;a.push({id:c.id,volume:Object(Q.e)(e.volume/c.concentration*e.concentration,2)})}}catch(l){r.e(l)}finally{r.f()}return a}({id:"Total",volume:r,concentration:i},o.map((function(e){return{id:Object(s.a)(e,1)[0],concentration:n}}))),c.a.createElement(c.a.Fragment,null,c.a.createElement(l.d,{flexDirection:"column",width:"75%"},c.a.createElement(l.e,{fontSize:2},"\u0420\u0430\u0437\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435"),c.a.createElement("ul",null,d.map((function(e){return c.a.createElement("li",null,"\u0420\u0430\u0441\u0442\u0432\u043e\u0440 ",e.id," - ",e.volume<1?"".concat(1e3*e.volume,"\u043c\u043b"):"".concat(e.volume,"\u043b"))})),c.a.createElement("li",null,"\u0414\u043e\u043b\u0438\u0442\u044c \u0434\u043e ",r,"\u043b"),c.a.createElement("li",null,c.a.createElement("b",null,"TDS:")," ",u," ppm; ",c.a.createElement("b",null,"EC:")," ",Object(L.f)(u,1)," \u043c\u0421\u043c/\u0441\u043c"))))}function ue(){var e=Object(H.a)(["\n  @media screen and (min-width: 800px) {\n    width: 75%;\n  }\n"]);return ue=function(){return e},e}var me=P.b.ul(ue());var fe=function(){var e=Object(m.d)((function(e){return e.calculator})).result,t=Object(m.d)(Object(F.a)(A.k)).solution_volume,n=le(),a=ie(),r=(null===e||void 0===e?void 0:e.score)||0,i=(null===e||void 0===e?void 0:e.elements)||Object(L.d)(),o=(null===e||void 0===e?void 0:e.deltaElements)||Object(L.d)(),u=Object(L.a)(i),f=Object(Q.e)(Object(Q.f)(((null===e||void 0===e?void 0:e.fertilizers)||[]).map((function(e){return e.volume||0}))),1);return c.a.createElement(l.c,null,c.a.createElement(l.d,{alignItems:"center",flexDirection:"column",width:"100%"},c.a.createElement(l.e,{fontSize:2},"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u0440\u0430\u0441\u0447\u0435\u0442\u0430"),c.a.createElement(l.d,{justifyContent:"space-around",width:"100%"},i&&W.d.map((function(e){return c.a.createElement(d.a,{key:e,name:e,value:Object(Q.e)(i[e]),delta:Object(Q.e)(o[e])})}))),c.a.createElement(l.d,{justifyContent:"space-around",width:"100%"},i&&W.e.map((function(e){return c.a.createElement(d.a,{key:e,name:e,value:Object(Q.e)(1e3*i[e]),delta:Object(Q.e)(1e3*o[e])})}))),c.a.createElement(l.d,{justifyContent:"space-around"},c.a.createElement(te,{name:"\u0394\u03a3 I",value:u.ion_balance}),c.a.createElement(te,{name:"EC",value:u.EC}),c.a.createElement(te,{name:"%NH4",value:Object(Q.e)(100*u.ratio.NH4.NO3,1)}),c.a.createElement(te,{name:"K:Mg",value:u.ratio.K.Mg}),c.a.createElement(te,{name:"K:Ca",value:u.ratio.K.Ca}),c.a.createElement(te,{name:"Ca:N",value:u.ratio.Ca.N})),c.a.createElement(l.e,{fontSize:2},"\u041e\u0446\u0435\u043d\u043a\u0430: ",function(e){var t="\u041d\u0435 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u0435\u0442";return e>=95&&(t="\u0418\u0434\u0435\u0430\u043b\u044c\u043d\u043e"),e>=90&&e<95&&(t="\u041e\u0442\u043b\u0438\u0447\u043d\u043e"),e>=85&&e<90&&(t="\u041e\u0447\u0435\u043d\u044c \u0445\u043e\u0440\u043e\u0448\u043e"),e>=80&&e<85&&(t="\u0425\u043e\u0440\u043e\u0448\u043e"),e>=70&&e<80&&(t="\u0421\u0440\u0435\u0434\u043d\u0435"),e>=60&&e<70&&(t="\u041f\u043b\u043e\u0445\u043e"),e>=40&&e<60&&(t="\u0423\u0436\u0430\u0441\u043d\u043e"),t}(r)),c.a.createElement(l.f,{fontSize:6},"".concat(r||0,"%")),c.a.createElement(me,null,c.a.createElement("li",null,"\u0414\u043b\u044f ",t,"\u043b \u0440\u0430\u0441\u0442\u0432\u043e\u0440\u0430"),a.map((function(e){var t=Object(s.a)(e,2),n=t[0],a=t[1];return c.a.createElement("li",null,c.a.createElement("b",null," \u0420\u0430\u0441\u0442\u0432\u043e\u0440 ",n," "),c.a.createElement("ul",null,c.a.createElement(ae,{fertilizers:a})))})),c.a.createElement("li",null,"\u0414\u043e\u043b\u0438\u0442\u044c ",1e3*t-f," \u043c\u043b \u0432\u043e\u0434\u044b \u0434\u043e ",t,"\u043b"),c.a.createElement("li",{title:"\u0418\u043b\u0438 \u043c\u0438\u043d\u0435\u0440\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f, \u0432 \u043c\u0433/\u043b"},c.a.createElement("b",null,"TDS:")," ",n," ppm; ",c.a.createElement("b",null,"EC:")," ",Object(L.f)(n,1)," \u043c\u0421\u043c/\u0441\u043c")),c.a.createElement(oe,null),(null===e||void 0===e?void 0:e.stats)&&c.a.createElement(l.f,null,"\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043e \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u043e\u0432: ",null===e||void 0===e?void 0:e.stats.count," \u0412\u0440\u0435\u043c\u044f: ",null===e||void 0===e?void 0:e.stats.time," \u0441\u0435\u043a")))},de=n(319),se=n(423),be=n.n(se),ve=n(451),Ee=n.n(ve),pe=be.a,je=Ee.a,Oe=["id"].concat(Object(re.a)(W.b));function ge(e){var t=Object(r.createRef)(),n=Object(m.c)(),l=Object(r.useState)({width:0,height:0}),i=Object(s.a)(l,2),o=i[0],u=i[1];Object(r.useEffect)((function(){var e,n,a={width:(null===(e=t.current)||void 0===e?void 0:e.offsetWidth)||0,height:(null===(n=t.current)||void 0===n?void 0:n.offsetHeight)||0};o.width!==a.width&&u(a)}),[t,o.width]);var d=function(e){var t,a;console.log(e.target.value,null===(t=e.target.files)||void 0===t?void 0:t[0]);var r=null===(a=e.target.files)||void 0===a?void 0:a[0];if(!r)return r;var c=new FileReader;c.onload=function(){console.log(c.result),function(e){var t=pe(e,{columns:Oe});isNaN(parseInt(t[0].P))&&t.splice(0,1);var a,r=Object(f.a)(t);try{for(r.s();!(a=r.n()).done;){var c=a.value,l=c.id,i=Object(C.a)(c,["id"]),o=Object(ce.a)(l,i);n(Object(J.d)(o))}}catch(u){r.e(u)}finally{r.f()}}(c.result)},c.readAsText(r)};return c.a.createElement(c.a.Fragment,null,c.a.createElement(E.a,{sx:{position:"relative"},ref:t,component:de.a},c.a.createElement("input",{type:"file",accept:"text/csv, .csv",onChange:function(e){return d(e)},style:Object(a.a)({top:0,left:0,position:"absolute",opacity:0},o)})))}var he=n(320),xe=function(){var e=document.createElement("a");return document.body.appendChild(e),e.setAttribute("style","display: none"),function(t,n){var a=new Blob([t],{type:"octet/stream"}),r=window.URL.createObjectURL(a);e.href=r,e.download=n,e.click(),window.URL.revokeObjectURL(r)}}();function Ce(e){var t=Object(m.d)((function(e){return e.calculator})).fertilizers;return c.a.createElement(c.a.Fragment,null,c.a.createElement(E.a,{onClick:function(){var e=t.map((function(e){return Object(ce.b)(e,!1)})).map((function(e){var t=W.b.map((function(t){return e.elements[t]}));return[e.id].concat(Object(re.a)(t))})),n=je(e,{columns:["\u0423\u0434\u043e\u0431\u0440\u0435\u043d\u0438\u0435"].concat(Object(re.a)(W.b)),header:!0});xe(n,"\u0423\u0434\u043e\u0431\u0440\u0435\u043d\u0438\u044f.csv")},component:he.a}))}var ye=n(57);function we(e){var t=Object(m.d)((function(e){return e.calculator})).recipes;return c.a.createElement(c.a.Fragment,null,c.a.createElement(E.a,{onClick:function(){var e=t.map((function(e){var t=W.b.map((function(t){return e.elements[t]}));return[e.name].concat(Object(re.a)(t))})),n=je(e,{columns:["\u041f\u0440\u043e\u0444\u0438\u043b\u044c"].concat(Object(re.a)(W.b)),header:!0});xe(n,"\u041f\u0440\u043e\u0444\u0438\u043b\u0438.csv")},component:he.a}))}var ke=["id"].concat(Object(re.a)(W.b));function ze(e){var t=Object(r.createRef)(),n=Object(m.c)(),l=Object(r.useState)({width:0,height:0}),i=Object(s.a)(l,2),o=i[0],u=i[1];Object(r.useEffect)((function(){var e,n,a={width:(null===(e=t.current)||void 0===e?void 0:e.offsetWidth)||0,height:(null===(n=t.current)||void 0===n?void 0:n.offsetHeight)||0};o.width!==a.width&&u(a)}),[t,o.width]);var d=function(e){var t,a;console.log(e.target.value,null===(t=e.target.files)||void 0===t?void 0:t[0]);var r=null===(a=e.target.files)||void 0===a?void 0:a[0];if(!r)return r;var c=new FileReader;c.onload=function(){console.log(c.result),function(e){var t=pe(e,{columns:ke});isNaN(parseInt(t[0].P))&&t.splice(0,1);var a,r=Object(f.a)(t);try{for(r.s();!(a=r.n()).done;){var c=a.value,l=c.id,i=Object(C.a)(c,["id"]);n(Object(J.h)({name:l,elements:i}))}}catch(o){r.e(o)}finally{r.f()}}(c.result)},c.readAsText(r)};return c.a.createElement(c.a.Fragment,null,c.a.createElement(E.a,{sx:{position:"relative"},ref:t,component:de.a},c.a.createElement("input",{type:"file",accept:"text/csv, .csv",onChange:function(e){return d(e)},style:Object(a.a)({top:0,left:0,position:"absolute",opacity:0},o)})))}function Se(e){return{"@media screen and (max-width: 800px)":e}}var Ie={accuracy:.2,solution_volume:1,solution_concentration:100,recipe:Object(a.a)({},ye.b[0].elements,{},ye.a,{Cl:0}),fertilizers:[],dilution_enabled:!1,dilution_volume:20,dilution_concentration:1},De=function(e){var t=e.handleSubmit,n=Object(m.c)();return c.a.createElement(o.a,{onSubmit:t((function(){n(Object(J.b)())}))},c.a.createElement(l.d,{sx:Object(a.a)({flexDirection:"row"},Se({flexDirection:"column-reverse"}))},c.a.createElement(l.a,{flex:1,sx:Object(a.a)({marginRight:2},Se({marginRight:0}))},c.a.createElement(g,null)),c.a.createElement(l.d,{flexDirection:"column",flex:1},c.a.createElement(l.a,{flex:1,marginBottom:2},c.a.createElement(ne,null)),c.a.createElement(l.a,{flex:1},c.a.createElement(fe,null)),c.a.createElement(l.a,{flex:1},c.a.createElement(K,null)),c.a.createElement(l.c,null,c.a.createElement(l.e,{fontSize:2},"\u0418\u043c\u043f\u043e\u0440\u0442/\u042d\u043a\u0441\u043f\u043e\u0440\u0442"),c.a.createElement(l.d,{flexDirection:"column",p:3},c.a.createElement(l.d,{alignItems:"center",paddingBottom:2,justifyContent:"space-between",flexWrap:"wrap"},c.a.createElement(l.f,null,"\u0423\u0434\u043e\u0431\u0440\u0435\u043d\u0438\u044f"),c.a.createElement(l.a,{sx:{"&>*":{marginLeft:1}}},c.a.createElement(ge,null),c.a.createElement(Ce,null),c.a.createElement(E.a,{component:i.a,onClick:function(){return n(Object(J.f)())}}))),c.a.createElement(l.d,{alignItems:"center",justifyContent:"space-between",flexWrap:"wrap"},c.a.createElement(l.f,null,"\u0420\u0435\u0446\u0435\u043f\u0442\u044b"),c.a.createElement(l.a,{sx:{"&>*":{marginLeft:1}}},c.a.createElement(ze,null),c.a.createElement(we,null),c.a.createElement(E.a,{component:i.a,onClick:function(){return n(Object(J.j)())}}))))))))},Ne=Object(u.a)({form:A.k,initialValues:Ie,enableReinitialize:!0})(De),_e=Object(m.b)((function(e){var t,n=(null===(t=e.calculator)||void 0===t?void 0:t.calculationForm)||Ie;return{initialValues:Object(a.a)({},n,{recipe:Object(a.a)({Cl:0},ye.a,{},n.recipe)})}}))(Ne);t.default=_e}}]);
//# sourceMappingURL=6.050b618f.chunk.js.map